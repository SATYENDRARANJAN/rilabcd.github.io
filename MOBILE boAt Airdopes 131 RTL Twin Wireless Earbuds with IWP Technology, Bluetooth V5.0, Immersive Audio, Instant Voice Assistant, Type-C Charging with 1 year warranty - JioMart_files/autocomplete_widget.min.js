var app_id=window.algolia_app_id,api_key=window.algolia_api_key,sugg_index_name=window.algolia_suffix+"_query_suggestions";let searchClient=algoliasearch(app_id,api_key);var aa_master_code=window.default_vertical_city_code;localStorage.getItem("jio_region_codes")&&(aa_master_code=JSON.parse(localStorage.getItem("jio_region_codes")));var aa_region_filter="",aa_cat_filter="",aa_available_filter="";for(var vertical in aa_master_code)if(aa_master_code[vertical]&&"1"==window.autocomplete_inventory)for(let k in aa_master_code[vertical]){var code=aa_master_code[vertical][k];aa_available_filter+="available_stores:"+code+" OR "}let aa_mstar_vertical_code=JSON.parse(localStorage.getItem("jio_vertical_city_code"));for(var vertical in aa_mstar_vertical_code)if(aa_mstar_vertical_code[vertical]);else{var cat_name=vertical.toLowerCase();aa_cat_filter+="NOT category_level.level1:"+(cat_name=cat_name.charAt(0).toUpperCase()+cat_name.slice(1))+" AND "}""!=aa_cat_filter&&(aa_cat_filter=aa_cat_filter.slice(0,-5),aa_region_filter+="("+aa_cat_filter+")"),""!=aa_cat_filter&&""!=aa_available_filter&&(aa_region_filter+=" AND "),""!=aa_available_filter&&(aa_available_filter=aa_available_filter.slice(0,-4),aa_region_filter+="("+aa_available_filter+")");var aa_src=["web",localStorage.getItem("nms_mgo_pincode")];for(var vertical in aa_master_code)if(null!=aa_master_code[vertical])for(let k in aa_master_code[vertical])aa_src.push(aa_master_code[vertical][k]);const{autocomplete:autocomplete,getAlgoliaResults:getAlgoliaResults}=window["@algolia/autocomplete-js"];let place_txt="Search JioMart";"gpay"==localStorage.getItem("nms_refer_lite")&&(place_txt="Search");var catalogsearch_url="";catalogsearch_url="plp"==page_type?"catalogsearch/result_plp":"catalogsearch/result";const{setQuery:setQuery,setIsOpen:setIsOpen}=autocomplete({container:"#autocomplete",placeholder:place_txt,debug:!0,openOnFocus:!0,detachedMediaQuery:"none",classNames:{input:"search_input",panel:"search-result-container",list:"search-result-list",item:"search-result-list-item"},onSubmit({state:state}){if(state.query&&""!=state.query){let aa_query=state.query,str_id="";localStorage.getItem("jio_store_id")&&(str_id="?str_id="+localStorage.getItem("jio_store_id"));let aa_ind_name,aa_href=`/search/${aa_query}/in/${window.algolia_suffix+"_master_vertical"}${str_id}`;window.location.href=aa_href}},onStateChange({state:state}){state.isOpen&&1==state.isOpen&&""!=state.query?($("body").addClass("autocomplete-open"),setTimeout(()=>{if($(".aa-Panel").length>0){let srch_top=$("#search_initial").offset().top+64;$(".aa-Panel").css("top",srch_top+"px")}},50)):$("body").removeClass("autocomplete-open")},getSources:({query:query})=>[{sourceId:"suggestions",getItems({query:query}){if(""!=query)return $(".aa-Panel").show(),getAlgoliaResults({searchClient:searchClient,queries:[{indexName:sugg_index_name,query:query,params:{hitsPerPage:10,clickAnalytics:!0,filters:aa_region_filter,analyticsTags:aa_src}}]});$(".aa-Panel").hide()},templates:{item({item:item,components:components,html:html}){let id=item.__autocomplete_id,queryId=item.__autocomplete_queryID,ind_name=window.algolia_suffix+"_master_vertical",str_id="";localStorage.getItem("jio_store_id")&&(str_id="?str_id="+localStorage.getItem("jio_store_id"));let href=`/search/${item.query}/in/${ind_name}${str_id}`,ver_html="";return 0==id&&(categories=pickMostPopularCategory(item),categories.length>0&&(ver_html+=`<div class="search-result-list-image">\n                                <img src="/assets/ds2web/jds-icons/search-lens-icon.svg" alt="" />\n                            </div>\n                            <div>\n                                <div>\n                                    ${item.query}\n                                </div>\n                                <div class="search-result-list-category">\n                                    <span>in</span>`,categories.map((category,index)=>{let vertical="";vertical="Sports, Toys & Luggage"==category?category.replace(/[^\w\s]/gi,"").replace(/ /g,"").replace(/&/g,"and"):category.replace(/ /g,"").replace(/&/g,"and");let index_name=window.algolia_suffix+"_"+vertical.toLowerCase(),str_id="";localStorage.getItem("jio_store_id")&&(str_id="&str_id="+localStorage.getItem("jio_store_id"));let href=`/search/${item.query}/in/${index_name}${str_id}`;ver_html+=`\n                                            <a class="jm-link jm-pl-xxs" href="${href}">${category}</a>`}),ver_html+="\n                                </div>\n                            </div>")),""==ver_html&&(ver_html=`<a href="${href}" class="search-result-list-link">\n                            <span class="search-result-list-image">\n                                <img src="/assets/ds2web/jds-icons/search-lens-icon.svg" alt="" />\n                            </span>\n                            <span class="search-result-list-text">\n                                ${item.query}\n                            </span>\n                        </a>`),null!=item.query?html`
                        <div class="product-item-info auto-suggestion" data-queryid="${queryId}" data-id="${id}">
                        ${html([ver_html])}
                        </div>
                        `:""}},onSelect:function(event){let query,ind_name,href="/search/"+event.item.query+"/in/"+(window.algolia_suffix+"_master_vertical");window.location.href=href}}]});function pickMostPopularCategory(hit){let categories=Object.values(hit).filter(maybeIndex=>maybeIndex.facets&&maybeIndex.facets.exact_matches&&maybeIndex.facets.exact_matches["category_level.level1"]&&maybeIndex.facets.exact_matches["category_level.level1"].length>0).map(index=>index.facets.exact_matches["category_level.level1"][0]);var unique={};categories=categories.filter((function(currentObject){return!(currentObject.value in unique)&&(unique[currentObject.value]=!0,!0)})),categories.sort((function(a,b){return b.count-a.count}));var cat_arr=[];for(let category of categories)cat_arr.push(category.value);return cat_arr}$(document).on("click","#search_initial_close",(function(){$("body").removeClass("search-open"),$("body").removeClass("disable-scroll"),$("#search_initial").removeClass("jm-page-bottomsheet-visible"),$(".aa-ClearButton").trigger("click"),setTimeout(()=>setIsOpen(!1),10)})),$(document).on("input",".search_input",(function(){let val;""!=$(this).val()?($("#search_results_suggestions").show(),$("#search_empty_holder").hide()):($("#search_results_suggestions").hide(),$("#search_empty_holder").show())}));