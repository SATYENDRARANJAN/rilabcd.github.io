function update_variant_price(sku){var product=window.variants_extra_json[sku],mrp=product.mrp.toFixed(2),selling_price=product.selling_price.toFixed(2),region_actual_price=product.region_actual_price,save=(product.mrp-product.selling_price).toFixed(2),discount_pct=product.discount_pct,display_name=product.display_name,uom_price_compare=product.uom_for_price,uom_unit_compare=product.uom_for_unit,factor_price_compare=product.factor_for_price_compare,region_style="";""!=region_actual_price&&null!=region_actual_price&&(region_style="#00a100",region_actual_price=region_actual_price.toFixed(2)),0==lightning_label&&(region_actual_price="");let uom_price="",uom_unit="",factor_price="";"1"==uom_attribute&&""!=uom_price_compare&&""!=uom_unit_compare&&""!=factor_price_compare&&null!=uom_price_compare&&null!=uom_unit_compare&&null!=factor_price_compare&&(uom_price=uom_price_compare,uom_unit=uom_unit_compare,factor_price=(selling_price*factor_price_compare).toFixed(2)),$(".product-header-name").html(display_name),$("#price_section").html(`\n\t\t<div class="product-price jm-mb-xxs">\n\t\t\t${selling_price==mrp?"MRP":""}\n\t\t\t<span class="jm-heading-xxs" ${""!=region_style?`style="color:${region_style}"`:""}>&#8377;${selling_price}</span>\n            ${""!=factor_price&&""!=uom_price&&""!=uom_unit?`<span style="margin-left: 4px;"> (&#8377; ${factor_price}/${uom_price} ${uom_unit})</span>`:""}                            \t\t\t\t\t\n           \t${discount_pct>0?`<span class="jm-badge jm-ml-xs">${discount_pct}% Off</span>`:""}\n\t\t</div>\n\t\t${selling_price!=mrp?`\n\t\t<div class="jm-body-xxs jm-fc-primary-grey-80 jm-mb-xxs">\n\t\t\t${mrp_label}\n\t\t\t<span class="line-through">&#8377;${mrp}</span>\n\t\t\t(Incl. of all taxes)\n\t\t</div>`:""}\n\t`),""!=region_actual_price&&($(".product-offer-limited-time-deal-wrapper").css({display:"block"}),$(".ds2msite_pdp_ltd").html(`<div class="jm-list-content-caption">\n\t\t\t\t<div class="jm-list-content-caption-text">\n\t\t\t\t\t<span class="jm-body-xxs-bold">${lightning_label}:</span>\n\t\t\t\t\t<span class="jm-fc-secondary-50 jm-body-xxs">\n\t\t\t\t\t\t<span id="timer" class="cd_timer_deal"> 14m 44s </span> left</span>\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t<div class="jm-list-content-title">\n\t\t\t\t${discount_pct>0?`<div class="jm-list-content-title-text jm-body-xxs jm-fc-light-sparkle-60 jm-pr-s">\n\t\t\t\t\tAdditional ${discount_pct}% Off\n\t\t\t\t</div>`:""}\n\t\t\t\t<div class="jm-body-xxs jm-fc-primary-grey-60 jm-ml-s">\n\t\t\t\t\tRegular Price <span class="line-through"> &#8377; ${region_actual_price} </span>\n\t\t\t\t</div>\n\t\t\t</div>`))}$(document).ready((function(){$("#locked_offer_terms").length>0&&$("#locked_offer_terms").prop("checked",!1);var url=new Url(window.location.href),attr=url.query.source_attribution,cart_update=url.query.cart_update;(attr&&"JioMartApp-CPS"==attr||"jiomartapp"==$.cookie("nms_refer_lite"))&&1==cart_update&&get_cart_details(!0),applyPlusMinusButton()})),$(document).on("click",".variant-holder button",(function(ev){let attr;if("size"==$(this).attr("data-attr")){if(!$(this).hasClass("disabled")){let size_reload;if(1==$("#size_reload").val()){$("#variant_size button").removeClass("active"),$(this).addClass("active"),$("#variant_heading_size").text("Size").removeClass("alert_size");let sku=$(this).attr("data-prodcode");if(window.product_code=sku,apply_wishlist(sku),window.variants_extra_json[sku]){let alt_sku=window.variants_extra_json[sku].alternate_product_code;$("#alt_sku").val(alt_sku),window.article_obj.article_id=alt_sku,update_variant_price(sku)}let btn_html=`<button class="jm-btn primary medium center full-width jm-fw-bold addtocartbtn" data-sku="${sku}">Add to Cart</button>`;$(".cart-action").html(btn_html),$(".cart-action").hasClass("product-footer-item-added")&&$(".cart-action").removeClass("product-footer-item-added").addClass("product-footer-item"),applyPlusMinusButton()}else{let prod_url=$(this).attr("data-url");window.location.href=prod_url}}}else{let prod_url=$(this).attr("data-url");window.location.href=prod_url}})),$(document).on("click",".addtocartbtn",(function(ev){ev.stopPropagation();var bannerPromo=!0,cartType=$(this).closest(".cart_btn").attr("data-cartType"),bestCart="";if($("body").hasClass("otc-product-page")&&null!=$(this).closest(".pdp_deals_promo")&&null!=$(this).closest(".pdp_deals_promo").attr("id")&&(bestCart="#"+$(this).closest(".pdp_deals_promo").attr("id")),localStorage.getItem("jio_store_id")&&$(body).hasClass("store-pickup")&&(null==localStorage.getItem("userid")||"0"==localStorage.getItem("userid"))){var sku=$(this).attr("data-sku");localStorage.setItem("jio_pickup_sku",sku);var pathname=window.location.pathname+window.location.search;return localStorage.setItem("redirectUrl",pathname),window.location.href="/customer/account/login",!1}if(null!=cartType&&null!=cartType&&""!=cartType&&"bundle"==cartType){var qty=1,sku=$(this).attr("data-sku"),totalQty=0,promoSku=$(this).attr("data-promosku"),universal_cart,category="",sub_category="",brand="",product_section="",dimension21="RRL",dimension22=!1,prod_position="",isAddOnProduct=!1,status,CombinedSku;if(status=handle_multiple_add_to_cart(qty,sku,universal_cart=!0))sku.split(",").forEach((function(item,index){if(isAddOnProduct=!1,item!=promoSku){if($("body").hasClass("otc-product-page")){category=null!=$(".product-footer-wrapper").find(".gtmEvents").attr("data-cate")?$(".product-footer-wrapper").find(".gtmEvents").attr("data-cate"):"",sub_category=null!=$(".product-footer-wrapper").find(".gtmEvents").attr("data-subcate")?$(".product-footer-wrapper").find(".gtmEvents").attr("data-subcate"):"",brand=null!=$(".product-footer-wrapper").find(".gtmEvents").attr("data-manu")?$(".product-footer-wrapper").find(".gtmEvents").attr("data-manu"):"",dimension21=null!=$(".product-footer-wrapper").find(".gtmEvents").attr("data-sellername")?$(".product-footer-wrapper").find(".gtmEvents").attr("data-sellername"):"",dimension22=null!=$(".product-footer-wrapper").find(".gtmEvents").attr("data-3p-available")?$(".product-footer-wrapper").find(".gtmEvents").attr("data-3p-available"):"",prod_position=null!=$(".product-footer-wrapper").find(".gtmEvents").attr("data-position")?$(".product-footer-wrapper").find(".gtmEvents").attr("data-position"):"",bannerPromo=!1;var add_on_status=$("#add_on_status").val();if($("body").hasClass("prod-electronics")&&1==add_on_status&&$("#elec_addon_dialog").length>0&&(reset_addon_selection(),$("body").addClass("disable-scroll"),$("#elec_addon_dialog").addClass("jm-bottomsheet-visible"),$("#elec_addon_dialog").attr("data-source","addtocart"),window.free_service.length>0)){var free_prods=window.free_service;$(free_prods).each((function(i,val){var main_sku=$("#main_product_id").val(),addOnStatus;0==IsDependentproductInCart(val,main_sku)&&(perform_add_to_cart(1,val,0,main_sku)&&(isAddOnProduct=!0))})),get_cart_details(!0)}}}else if(category=null!=$(".pdp_deals_promo .product-card-wrapper .home_ripple[data-objid = "+item+"]").find(".gtmEvents").attr("data-cate")?$(".pdp_deals_promo .product-card-wrapper .home_ripple[data-objid = "+item+"]").find(".gtmEvents").attr("data-cate"):"",sub_category=null!=$(".pdp_deals_promo .product-card-wrapper .home_ripple[data-objid = "+item+"]").find(".gtmEvents").attr("data-subcate")?$(".pdp_deals_promo .product-card-wrapper .home_ripple[data-objid = "+item+"]").find(".gtmEvents").attr("data-subcate"):"",brand=null!=$(".pdp_deals_promo .product-card-wrapper .home_ripple[data-objid = "+item+"]").find(".gtmEvents").attr("data-manu")?$(".pdp_deals_promo .product-card-wrapper .home_ripple[data-objid = "+item+"]").find(".gtmEvents").attr("data-manu"):"",dimension21=null!=$(".pdp_deals_promo .product-card-wrapper .home_ripple[data-objid = "+item+"]").find(".gtmEvents").attr("data-sellername")?$(".pdp_deals_promo .product-card-wrapper .home_ripple[data-objid = "+item+"]").find(".gtmEvents").attr("data-sellername"):"",dimension22=null!=$(".pdp_deals_promo .product-card-wrapper .home_ripple[data-objid = "+item+"]").find(".gtmEvents").attr("data-3p-available")?$(".pdp_deals_promo .product-card-wrapper .home_ripple[data-objid = "+item+"]").find(".gtmEvents").attr("data-3p-available"):"",$(this).closest(".pdp_deals_promo").find(".product-card-wrapper").length>0&&(prod_position=$($(this).closest(".pdp_deals_promo").find(".product-card-wrapper")).index($(this).closest(".product-card-wrapper"))+1),bannerPromo=!0,$("body").hasClass("prod-electronics")&&$(".swiper-slide#item_pdp_bundle_deals_"+promoSku).find(".promo-add-on-content").length>0){$("#elec_promo_addon_dialog .modal-content").html(""),$("#elec_promo_addon_dialog .modal-content").html($(".swiper-slide#item_pdp_bundle_deals_"+promoSku).find(".promo-add-on-content").html()),$("#elec_promo_addon_dialog").modal("show"),$("#elec_promo_addon_dialog").attr("data-source","addtocart");var main_sku=$("#elec_promo_addon_dialog .main_product_id").val();if(null!=main_sku&&null!=main_sku&&""!=main_sku){var promo_service_code="promo_free_service_"+main_sku;if(void 0!==window[promo_service_code]&&null!==window[promo_service_code]&&window[promo_service_code].length>0){var promo_free_prods=window[promo_service_code];$(promo_free_prods).each((function(i,val){var addOnStatus;0==IsDependentproductInCart(val,main_sku)&&(perform_add_to_cart(1,val,0,main_sku)&&(isAddOnProduct=!0))})),get_cart_details(!0)}}}if(0==isAddOnProduct){var message='2 items added <a id="view_cart_link" data-widget="'+product_section+'" data-objid="'+item+'" href="/checkout/cart/"><span class="btn_got">VIEW CART</span></a>',toast_message="Added to cart";if("jio"==$.cookie("nms_refer_lite"))var message="Added to cart",toast_message="Added to cart";1==window.toastMsgStatus&&null!=toast_message&&""!=toast_message&&"undefined"!=typeof app_toast_msg?app_toast_msg(toast_message,"VIEW",window.location.origin+"/checkout/cart/","0"):notify(message,"success")}applyPlusMinusButton(bestCart);var queryId="";$(this).attr("data-queryid")&&(queryId=$(this).attr("data-queryid")),cart_success_tracking(item,queryId,category,sub_category,brand,dimension21,dimension22,bannerPromo,prod_position)}));else $(this).attr("disabled",!1)}else{var category="",sub_category="",brand="",product_section="",dimension21="RRL",dimension22=!1,prod_position="",bestCart="";($("body").hasClass("otc-list-page")||$("body").hasClass("search-result-page"))&&($(this).closest(".main-content").find(".plp_product_list").length>0&&$(this).closest(".plp_product_list")&&($("#mstar_box").length>0&&$("#mstar_box").is(":visible")&&(prod_position=$($(this).closest("#mstar_box").find(".plp_product_list")).index($(this).closest("#mstar_box .plp_product_list"))+1),$("#algolia_box").length>0&&$("#algolia_box").is(":visible")&&(prod_position=$($(this).closest("#algolia_box").find(".plp_product_list")).index($(this).closest("#algolia_box .plp_product_list"))+1)),$(this).closest("#algolia_hits").find(".plp_product_list").length>0&&(prod_position=$($(this).closest("#algolia_hits").find(".plp_product_list")).index($(this).closest(".plp_product_list"))+1));var sectionTitle=$(this).closest("section").attr("data-tracker"),qty,sku,universal_cart,status;if(null!=sectionTitle&&null!=sectionTitle&&""!=sectionTitle&&(window.nms_tracker=sectionTitle,localStorage.removeItem("nms_product_tracker"),$(this).closest("section").find(".swiper-slide").length>0&&(prod_position=$($(this).closest("section").find(".swiper-slide")).index($(this).closest(".swiper-slide"))+1)),null!=(product_section=$(this).closest("section").attr("data-tracker"))&&null!=product_section&&""!=product_section){var itemDiv=null;$(this).closest(".pdp_product_list").length>0&&null!=(itemDiv=$(this).closest(".pdp_product_list"))&&null!=itemDiv&&(prod_position=$($(this).closest("section").find(".pdp_product_list")).index($(this).closest(".pdp_product_list"))+1),$(this).closest(".widget_product_list").length>0&&null!=(itemDiv=$(this).closest(".widget_product_list"))&&null!=itemDiv&&(prod_position=$($(this).closest("section").find(".widget_product_list")).index($(this).closest(".widget_product_list"))+1),null!=itemDiv&&null!=itemDiv&&(category=null!=itemDiv.find(".gtmEvents").attr("data-cate")?itemDiv.find(".gtmEvents").attr("data-cate"):"",sub_category=null!=itemDiv.find(".gtmEvents").attr("data-subcate")?itemDiv.find(".gtmEvents").attr("data-subcate"):"",brand=null!=itemDiv.find(".gtmEvents").attr("data-manu")?itemDiv.find(".gtmEvents").attr("data-manu"):"",dimension21=null!=itemDiv.find(".gtmEvents").attr("data-sellername")?itemDiv.find(".gtmEvents").attr("data-sellername"):"",dimension22=null!=itemDiv.find(".gtmEvents").attr("data-3p-available")?itemDiv.find(".gtmEvents").attr("data-3p-available"):"",bannerPromo=!1)}if($("body").hasClass("otc-product-page")){if($(this).closest(".product-footer-wrapper").length>0){var trackTitle=$(this).closest(".product-footer-wrapper").find(".gtmEvents").attr("data-tracker");null!=trackTitle&&null!=trackTitle&&""!=trackTitle&&(window.nms_tracker=trackTitle,localStorage.removeItem("nms_product_tracker")),itemProdDiv=$(this).closest(".product-footer-wrapper"),null!=itemProdDiv&&null!=itemProdDiv&&(category=null!=itemProdDiv.find(".gtmEvents").attr("data-cate")?itemProdDiv.find(".gtmEvents").attr("data-cate"):"",sub_category=null!=itemProdDiv.find(".gtmEvents").attr("data-subcate")?itemProdDiv.find(".gtmEvents").attr("data-subcate"):"",brand=null!=itemProdDiv.find(".gtmEvents").attr("data-manu")?itemProdDiv.find(".gtmEvents").attr("data-manu"):"",dimension21=null!=itemProdDiv.find(".gtmEvents").attr("data-sellername")?itemProdDiv.find(".gtmEvents").attr("data-sellername"):"",dimension22=null!=itemProdDiv.find(".gtmEvents").attr("data-3p-available")?itemProdDiv.find(".gtmEvents").attr("data-3p-available"):"",prod_position=null!=itemProdDiv.find(".gtmEvents").attr("data-position")?itemProdDiv.find(".gtmEvents").attr("data-position"):"")}null!=$(this).closest(".pdp_deals_promo")&&null!=$(this).closest(".pdp_deals_promo").attr("id")&&(bestCart="#"+$(this).closest(".pdp_deals_promo").attr("id"),$(this).closest(bestCart+" .bestdeals_content")&&(category=null!=$(this).closest(".swiper-slide").find(".gtmEvents").attr("data-cate")?$(this).closest(".swiper-slide").find(".gtmEvents").attr("data-cate"):"",sub_category=null!=$(this).closest(".swiper-slide").find(".gtmEvents").attr("data-subcate")?$(this).closest(".swiper-slide").find(".gtmEvents").attr("data-subcate"):"",brand=null!=$(this).closest(".swiper-slide").find(".gtmEvents").attr("data-manu")?$(this).closest(".swiper-slide").find(".gtmEvents").attr("data-manu"):"",dimension21=null!=$(this).closest(".swiper-slide").find(".gtmEvents").attr("data-sellername")?$(this).closest(".swiper-slide").find(".gtmEvents").attr("data-sellername"):"",dimension22=null!=$(this).closest(".swiper-slide").find(".gtmEvents").attr("data-3p-available")?$(this).closest(".swiper-slide").find(".gtmEvents").attr("data-3p-available"):"",bannerPromo=!1,prod_position=$($(this).closest("section").find(".swiper-slide")).index($(this).closest(".swiper-slide"))+1))}if(($("body").hasClass("otc-manu-page")||$("body").hasClass("otc-category-page")||$("body").hasClass("otc-brand-page")||$("body").hasClass("search-result-page"))&&($("#actionField").length>0&&(window.nms_tracker=$("#actionField").val()),$("#topdeal_page").length>0&&$("#curr_cat_name").length>0&&(window.nms_tracker=$("#curr_cat_name").val()),category=null!=$(this).closest(".plp_product_list").find(".gtmEvents").attr("data-cate")?$(this).closest(".plp_product_list").find(".gtmEvents").attr("data-cate"):"",sub_category=null!=$(this).closest(".plp_product_list").find(".gtmEvents").attr("data-subcate")?$(this).closest(".plp_product_list").find(".gtmEvents").attr("data-subcate"):"",brand=null!=$(this).closest(".plp_product_list").find(".gtmEvents").attr("data-manu")?$(this).closest(".plp_product_list").find(".gtmEvents").attr("data-manu"):"",dimension21=null!=$(this).closest(".plp_product_list").find(".gtmEvents").attr("data-sellername")?$(this).closest(".plp_product_list").find(".gtmEvents").attr("data-sellername"):"",dimension22=null!=$(this).closest(".plp_product_list").find(".gtmEvents").attr("data-3p-available")?$(this).closest(".plp_product_list").find(".gtmEvents").attr("data-3p-available"):""),$("body").hasClass("search-result-page")&&(window.nms_tracker="Search Results"),$("body").hasClass("top-deals-list")&&$("#topdeal_page").length>0&&$(".data-tracker").length>0&&(window.nms_tracker=$(".data-tracker").text(),category=null!=$(this).closest(".plp_product_list").find(".gtmEvents").attr("data-cate")?$(this).closest(".plp_product_list").find(".gtmEvents").attr("data-cate"):"",sub_category=null!=$(this).closest(".plp_product_list").find(".gtmEvents").attr("data-subcate")?$(this).closest(".plp_product_list").find(".gtmEvents").attr("data-subcate"):"",brand=null!=$(this).closest(".plp_product_list").find(".gtmEvents").attr("data-manu")?$(this).closest(".plp_product_list").find(".gtmEvents").attr("data-manu"):"",dimension21=null!=$(this).closest(".plp_product_list").find(".gtmEvents").attr("data-sellername")?$(this).closest(".plp_product_list").find(".gtmEvents").attr("data-sellername"):"",dimension22=null!=$(this).closest(".plp_product_list").find(".gtmEvents").attr("data-3p-available")?$(this).closest(".plp_product_list").find(".gtmEvents").attr("data-3p-available"):"",$(this).closest(".top-deals-list").find(".plp_product_list").length>0&&(prod_position=$($(this).closest(".top-deals-list").find(".plp_product_list")).index($(this).closest(".plp_product_list"))+1)),localStorage.getItem("authtokenexpire")){var today=new Date,expiry=localStorage.getItem("authtokenexpire"),expiry_date=new Date(expiry);today.getTime()>expiry_date.getTime()&&("jiomartapp"==$.cookie("nms_refer_lite")?app_sendToApp({type:"refreshJMAuthenticationToken"}):generateUserToken(!0))}if($("#variant_size").length>0){let selected=!1;if($("#variant_size button").each((function(i,el){$(el).hasClass("active")&&(selected=!0)})),0==selected){let header_height=$("header").height()+50,scroll_pos=$("#variant_size").offset().top-header_height;return $("html, body").animate({scrollTop:scroll_pos},1e3,"swing",(function(){$("#variant_heading_size").text("Size: Select Size"),$("#variant_heading_size").hasClass("alert_size")?($("#variant_heading_size").removeClass("alert_size"),setTimeout((function(){$("#variant_heading_size").addClass("alert_size")}),1)):$("#variant_heading_size").addClass("alert_size")})),!1}}if($(this).attr("disabled",!0),status=handle_add_to_cart(qty=1,sku=$(this).attr("data-sku"),universal_cart=!0)){var notifyCart=' id="view_cart_link" data-widget="'+product_section+'" data-objid="'+sku+'" ',message="Added to cart",toast_message="Added to cart";if($("body").hasClass("catalog-product-view"))var notifyCart=' id="view_cart_link" data-widget="'+product_section+'" data-objid="'+sku+'" ',message="Added to cart",toast_message="Added to cart";if("jio"==$.cookie("nms_refer_lite"))var message="Added to cart",toast_message="Added to cart";var add_on_status=$("#add_on_status").val();if($("body").hasClass("prod-electronics")&&$(this).closest(".swiper-slide").find(".promo-add-on-content").length>0&&null!=$(this).closest(".cart_btn").attr("data-carttype")&&null!=$(this).closest(".cart_btn").attr("data-carttype")&&""!=$(this).closest(".cart_btn").attr("data-carttype")&&$(".otc-product-page #product_id").val()!=sku){$("#elec_promo_addon_dialog .modal-content").html(""),$("#elec_promo_addon_dialog .modal-content").html($(this).closest(".swiper-slide ").find(".promo-add-on-content").html()),$("#elec_promo_addon_dialog").modal("show"),$("#elec_promo_addon_dialog").attr("data-source","addtocart");var main_sku=$("#elec_promo_addon_dialog .main_product_id").val();if(null!=main_sku&&null!=main_sku&&""!=main_sku){var promo_service_code="promo_free_service_"+main_sku;if(void 0!==window[promo_service_code]&&null!==window[promo_service_code]&&window[promo_service_code].length>0){var promo_free_prods=window[promo_service_code];$(promo_free_prods).each((function(i,val){var main_sku,status=perform_add_to_cart(1,val,0,$("#elec_promo_addon_dialog .main_product_id").val())})),get_cart_details(!0)}}}else if($("body").hasClass("prod-electronics")&&1==add_on_status&&$("#elec_addon_dialog").length>0&&(""==bestCart||$(".otc-product-page #product_id").val()==sku)){if(reset_addon_selection(),$("body").addClass("disable-scroll"),$("#elec_addon_dialog").addClass("jm-bottomsheet-visible"),$("#elec_addon_dialog").attr("data-source","addtocart"),window.free_service.length>0){var free_prods=window.free_service;$(free_prods).each((function(i,val){var main_sku,status=perform_add_to_cart(1,val,0,$("#main_product_id").val())})),get_cart_details(!0)}}else 1==window.toastMsgStatus&&null!=toast_message&&""!=toast_message&&"undefined"!=typeof app_toast_msg?app_toast_msg(toast_message,"VIEW",window.location.origin+"/checkout/cart/","0"):notify(message,"success","/checkout/cart",notifyCart);if(applyPlusMinusButton(bestCart),"1"==window.exchange_status&&localStorage.getItem("jio_exchange_details")){let new_exchange=JSON.parse(localStorage.getItem("jio_exchange_details"));if(new_exchange.product_id==sku&&new_exchange.imei_validated&&new_exchange.quote_id&&""!=new_exchange.quote_id){let exch_cart_info=JSON.parse(localStorage.getItem("cart_info")),exch_cart_id=exch_cart_info.cart.id;remove_exchange_product(exch_cart_info.cart).then(status=>{add_exchange_product(sku,exch_cart_id).then(status=>{get_cart_details(!0)})})}}var queryId="";$(this).attr("data-queryid")&&(queryId=$(this).attr("data-queryid")),cart_success_tracking(sku,queryId,category,sub_category,brand,dimension21,dimension22,bannerPromo,prod_position)}else $(this).attr("disabled",!1)}return!1}));var count=0;function handle_add_to_cart(qty,sku,universal_cart){if(++count>=4)return notify("Error occurred. Try again later","error"),count=0,!1;if(null==localStorage.getItem("authtoken")){if("jiomartapp"==$.cookie("nms_refer_lite"))app_sendToApp({type:"refreshJMAuthenticationToken"});else if(generateUserToken(universal_cart))return handle_add_to_cart(qty,sku,universal_cart)}else{var cart_id=0;if(0==universal_cart&&localStorage.getItem("paynowID"))var cart_id=localStorage.getItem("paynowID");if(localStorage.getItem("jio_store_id")){localStorage.getItem("jio_pickup_cart_id")||create_universal_cart(!0);var cart_id=localStorage.getItem("jio_pickup_cart_id")}var cart_resp=perform_add_to_cart(qty,sku,cart_id,0);if(!0===cart_resp)return count=0,1==universal_cart&&get_cart_details(universal_cart),!0;if("UNAUTHORIZED"==cart_resp.reason_code){if(!localStorage.getItem("jio_store_id"))return localStorage.removeItem("userid"),localStorage.removeItem("authtoken"),handle_add_to_cart(qty,sku,universal_cart);var sku=$(this).attr("data-sku");localStorage.setItem("jio_pickup_sku",sku),localStorage.setItem("redirectUrl",window.location.href),window.location.href="/customer/account/login"}else if("CART_NOT_FOUND"==cart_resp.reason_code){if(create_universal_cart(universal_cart))return handle_add_to_cart(qty,sku,universal_cart)}else{if("OPERATION_PROHIBITED_WHILE_CHECKINGOUT"!=cart_resp.reason_code)return"INSUFFICIENT_INVENTORY"==cart_resp.reason_code?(notify("This product currently is out of stock at your pincode","error"),!1):cart_resp.reason_eng?(notify(cart_resp.reason_eng,"error"),!1):(notify("Error occurred. Try again later","error"),!1);if(continue_shopping())return handle_add_to_cart(qty,sku,universal_cart)}}}function handle_multiple_add_to_cart(qty,sku,universal_cart){if(++count>=4)return notify("Error occurred. Try again later","error"),count=0,!1;if(null==localStorage.getItem("authtoken")){if("jiomartapp"==$.cookie("nms_refer_lite"))app_sendToApp({type:"refreshJMAuthenticationToken"});else if(generateUserToken(universal_cart))return handle_multiple_add_to_cart(qty,sku,universal_cart)}else{var cart_id=0;if(0==universal_cart&&localStorage.getItem("paynowID"))var cart_id=localStorage.getItem("paynowID");if(localStorage.getItem("jio_store_id")){localStorage.getItem("jio_pickup_cart_id")||create_universal_cart(!0);var cart_id=localStorage.getItem("jio_pickup_cart_id")}var cart_resp=multiple_perform_add_to_cart(qty,sku,cart_id);if(!0===cart_resp)return count=0,1==universal_cart&&get_cart_details(universal_cart),!0;if("UNAUTHORIZED"==cart_resp.reason_code){if(!localStorage.getItem("jio_store_id"))return localStorage.removeItem("userid"),localStorage.removeItem("authtoken"),handle_multiple_add_to_cart(qty,sku,universal_cart);var sku=$(this).attr("data-sku");localStorage.setItem("jio_pickup_sku",sku),localStorage.setItem("redirectUrl",window.location.href),window.location.href="/customer/account/login"}else if("CART_NOT_FOUND"==cart_resp.reason_code){if(create_universal_cart(universal_cart))return handle_multiple_add_to_cart(qty,sku,universal_cart)}else{if("OPERATION_PROHIBITED_WHILE_CHECKINGOUT"!=cart_resp.reason_code)return"INSUFFICIENT_INVENTORY"==cart_resp.reason_code?(notify("This product currently is out of stock at your pincode","error"),!1):cart_resp.reason_eng?(notify(cart_resp.reason_eng,"error"),!1):(notify("Error occurred. Try again later","error"),!1);if(continue_shopping())return handle_multiple_add_to_cart(qty,sku,universal_cart)}}}function perform_add_to_cart(qty,sku,cart_id,depends_on){var d,n=(new Date).getTime(),userid=localStorage.getItem("userid"),authtoken=localStorage.getItem("authtoken"),pincode=localStorage.getItem("nms_mgo_pincode"),api_url=$("#mst_api_cart_pin_baseurl").val(),cart_status=!1,ajax_data={product_code:sku,qty:qty,n:n};0!=cart_id&&(ajax_data.cart_id=cart_id),0!=depends_on&&(ajax_data.depends_on=depends_on);var headers_data={userid:userid,authtoken:authtoken,pin:pincode};return localStorage.getItem("jio_store_id")&&(headers_data.storecode=localStorage.getItem("jio_store_id")),$.ajax({url:api_url+"cart/add_item",data:ajax_data,headers:headers_data,async:!1,method:"GET",dataType:"JSON",success:function(resp){"success"==resp.status&&(cart_status=!0)},error:function(xhr,status,error){if(xhr.responseJSON){var resp=xhr.responseJSON;cart_status=resp.reason}else notify("Error occurred. Try again later","error")}}),cart_status}function multiple_perform_add_to_cart(qty=1,sku,cart_id){var d,n=(new Date).getTime(),userid=localStorage.getItem("userid"),authtoken=localStorage.getItem("authtoken"),pincode=localStorage.getItem("nms_mgo_pincode"),api_url=$("#mst_api_cart_pin_baseurl").val(),cart_status=!1,cartJson={},multiple_product=[],products=[],ajax_data="",cartInfo=localStorage.getItem("cart_info");if(localStorage.getItem("jio_store_id"))var cartInfo=localStorage.getItem("pickup_cart_info");if(cartInfo){var cart_products=JSON.parse(cartInfo);cart_products.hasOwnProperty("cart")&&cart_products.cart.hasOwnProperty("lines")&&cart_products.cart.lines&&(products=cart_products.cart.lines)}if(null!=sku&&""!=sku&&(multiple_product=sku.split(",")).length>0&&multiple_product.forEach((function(item,index){if(products.length>0){for(var isExist=!1,i=0;i<products.length;i++)products[i].product_code==item&&(isExist=!0);0==isExist&&(cartJson[item]=qty)}else cartJson[item]=qty})),Object.keys(cartJson).length>0&&(ajax_data=JSON.stringify(cartJson)),Object.keys(ajax_data).length>0){var headers_data={userid:userid,authtoken:authtoken,pin:pincode};localStorage.getItem("jio_store_id")&&(headers_data.storecode=localStorage.getItem("jio_store_id"));var cartUrl=api_url+"cart/add_multiple_items";return 0!=cart_id&&(cartUrl=api_url+"cart/add_multiple_items?cart_id="+cart_id),$.ajax({url:cartUrl,data:ajax_data,headers:headers_data,contentType:"application/json",async:!1,method:"POST",dataType:"JSON",success:function(resp){if("success"==resp.status&&resp.result&&Object.keys(resp.result).length>0)for(var key in resp.result)resp.result.hasOwnProperty(key)&&resp.result[key].hasOwnProperty("result_reason_code")&&resp.result[key].result_reason_code&&(cart_status="OKAY"==resp.result[key].result_reason_code||resp.result[key].result_reason_code)},error:function(xhr,status,error){if(xhr.responseJSON){var resp=xhr.responseJSON;cart_status=resp.reason}else notify("Error occurred. Try again later","error")}}),cart_status}return!1}function generateUserToken(universal_cart){var d,n=(new Date).getTime(),api_url=$("#mstar_api_baseurl").val(),status=!1;return $.ajax({url:api_url+"session/create/guest?channel=msite",data:{n:n},async:!1,method:"GET",success:function(resp){if("success"==resp.status)if(resp.result.session){let result=resp.result.session;localStorage.setItem("authtoken",result.id),localStorage.setItem("userid",0),localStorage.setItem("authtokenexpire",result.valid_till),status=!0,create_universal_cart(universal_cart)}else notify("Error occurred. Try again later","error");else notify("Error occurred. Try again later","error")},error:function(){notify("Error occurred. Try again later","error")}}),status}function create_universal_cart(universal_cart){var d,n=(new Date).getTime(),userid=localStorage.getItem("userid"),authtoken=localStorage.getItem("authtoken"),api_url=$("#mst_api_cart_pin_baseurl").val(),cart_status=!1,ajax_url=api_url+"cart/create",ajax_data={n:n};if(localStorage.getItem("jio_store_id"))var ajax_url=api_url+"cart/create/store_pickup";else ajax_data.universal=universal_cart;return $.ajax({url:ajax_url,data:ajax_data,headers:{userid:userid,authtoken:authtoken},async:!1,method:"GET",dataType:"JSON",success:function(resp){if("success"==resp.status){cart_status=!0;var cart_id=resp.result.cart_id;0==universal_cart&&localStorage.setItem("paynowID",cart_id),localStorage.getItem("jio_store_id")&&localStorage.setItem("jio_pickup_cart_id",cart_id)}},error:function(xhr,status,error){cart_status=!1,notify("Error occurred. Try again later","error")}}),cart_status}function continue_shopping(){var d,n=(new Date).getTime(),userid=localStorage.getItem("userid"),authtoken=localStorage.getItem("authtoken"),api_url=$("#mst_api_cart_pin_baseurl").val(),cart_status=!1;return $.ajax({url:api_url+"cart/continue_shopping",data:{n:n},headers:{userid:userid,authtoken:authtoken},async:!1,method:"GET",dataType:"JSON",success:function(resp){"success"==resp.status&&(cart_status=!0)},error:function(xhr,status,error){cart_status=!1,notify("Error occurred. Try again later","error")}}),cart_status}function get_cart_details(universal_cart){var d,n=(new Date).getTime(),userid=localStorage.getItem("userid"),authtoken=localStorage.getItem("authtoken"),pincode=localStorage.getItem("nms_mgo_pincode"),api_url=$("#mst_api_cart_pin_baseurl").val(),cart_details=!1,cart_data={n:n};if(0==universal_cart){var cart_id=localStorage.getItem("paynowID");cart_data.cart_id=cart_id}if(localStorage.getItem("jio_store_id")&&localStorage.getItem("jio_pickup_cart_id")){var cart_id=localStorage.getItem("jio_pickup_cart_id");cart_data.cart_id=cart_id}var headers_data={userid:userid,authtoken:authtoken,pin:pincode};return localStorage.getItem("jio_store_id")&&(headers_data.storecode=localStorage.getItem("jio_store_id")),$.ajax({url:api_url+"cart/get",data:cart_data,headers:headers_data,async:!1,method:"GET",dataType:"JSON",success:function(resp){if("success"==resp.status&&(cart_details=!0,resp.result.cart)){var result=resp.result;if(1==universal_cart){var cart_count=0;result.hasOwnProperty("cart")&&result.cart.hasOwnProperty("lines")&&(cart_count=result.cart.lines.length),localStorage.setItem("nms_cart_count",cart_count),cart_count?null!=localStorage.getItem("nms_refer_lite")&&""!=localStorage.getItem("nms_refer_lite")&&"jio"==localStorage.getItem("nms_refer_lite")?(cart_count>0?$(".fcart-icon #menu_cart_count").text(cart_count).show():$(".fcart-icon #menu_cart_count").hide(),myjio_updatecart(cart_count)):"jiomartapp"==$.cookie("nms_refer_lite")&&app_update_cart(cart_count):null!=localStorage.getItem("nms_refer_lite")&&""!=localStorage.getItem("nms_refer_lite")&&"jio"==localStorage.getItem("nms_refer_lite")?($(".fcart-icon #menu_cart_count").hide(),myjio_updatecart(cart_count)):"jiomartapp"==$.cookie("nms_refer_lite")&&app_update_cart(cart_count);var cart_info=JSON.stringify(result);if(localStorage.getItem("jio_store_id")){localStorage.setItem("pickup_cart_info",cart_info);var cart_prods=result.cart.lines;cart_prods.length>0?$("#pickup_counter").text(cart_prods.length).show():$("#pickup_counter").text("").hide(),$(".pickup_cartbtn button").prop("disabled",!1),$(".pickup_cartbtn button").css("opacity","1"),$(".pickup_cartbtn a.showcart").css("opacity","1")}else localStorage.setItem("cart_info",cart_info);cart_count>0?$(".minicart-wrapper .counter-number").text(cart_count).show():$(".minicart-wrapper .counter-number").text(cart_count).hide()}else if(0==universal_cart){var cart_info=JSON.stringify(result);localStorage.setItem("buy_now_cart_info",cart_info),void 0!==buynow_cart_success&&buynow_cart_success()}if(localStorage.getItem("userid")&&"0"!=localStorage.getItem("userid")){let order_count_expiry=localStorage.getItem("jio_order_count_expiry"),order_count_today=new Date,order_count_date=new Date(order_count_expiry);if(order_count_today.getTime()>order_count_date.getTime()&&check_customer_order(),localStorage.getItem("jio_order_count")){let order_info=JSON.parse(localStorage.getItem("jio_order_count")),limit=order_info.limit,placed_order;order_info.placed_order_count<limit||checkShoppingValue(!0)}}else checkShoppingValue(!0)}},error:function(xhr,status,error){cart_details=!1,notify("Error occurred. Try again later","error")}}),cart_details}function cart_success_tracking(sku,queryId,category,sub_category,brand,dimension21=null,dimension22=null,bannerPromo=!0,prod_position=""){var cartInfo=localStorage.getItem("cart_info"),existingDimension21=dimension21,existingDimension22=dimension22,gtmStatus;if(localStorage.getItem("jio_store_id"))var cartInfo=localStorage.getItem("pickup_cart_info");if("ga"in window&&(tracker=ga.getAll()[0],tracker&&tracker.send("event","New Click actions","Addtocart","Add to Cart Button")),""==queryId){var algolia_data=localStorage.getItem("nms_alg_queryId");if(algolia_data){var alg_data=algolia_data.split(":"),product_sku,queryId;if(2==alg_data.length)if(sku==alg_data[0])trackAlgoliaInsight(sku,queryId=alg_data[1])}}else trackClickAlgoliaInsight(sku,queryId),trackAlgoliaInsight(sku,queryId);if(cartInfo&&"1"==document.getElementById("gtm_status").value){var cart_products=JSON.parse(cartInfo);if(dataLayer&&cart_products.cart.lines)for(var products=cart_products.cart.lines,i=0;i<products.length;i++)if(products[i].product_code==sku){var prod=products[i],customer={};0!=localStorage.getItem("userid")&&null!=localStorage.getItem("userid")?(customer.isLoggedIn=!0,customer.id=localStorage.getItem("userid"),localStorage.getItem("displayemail")&&(customer.email=$.md5(localStorage.getItem("displayemail"))),localStorage.getItem("new_customer")&&(customer.new_customer=localStorage.getItem("new_customer")),customer.city="NA",localStorage.getItem("nms_mgo_city")&&(customer.city=localStorage.getItem("nms_mgo_city").toUpperCase())):(customer.isLoggedIn=!1,customer.city="NA",localStorage.getItem("nms_mgo_city")&&(customer.city=localStorage.getItem("nms_mgo_city").toUpperCase()));var zipCode="NA";localStorage.getItem("nms_mgo_pincode")&&(zipCode=localStorage.getItem("nms_mgo_pincode"));var main_category="";prod.vertical_code&&(main_category+=ucfirst(prod.vertical_code,!0)),category&&(main_category+="/"+category),sub_category&&(main_category+="/"+sub_category),"undefined"!=typeof journeyDataLayer&&journeyDataLayer();var prodSku=prod.product_code,dimension19="FALSE",dimension20=null,dimension18=null;let productJson={},cartTracker;$.isEmptyObject(window.searchKeyData)?$("body").hasClass("search-result-page")&&$("#search_kwrd").length>0&&$("#search_kwrd").text()&&(dimension20=$("#search_kwrd").text()):$.each(JSON.parse(window.searchKeyData),(function(itemIndex,itemElement){prodSku&&itemIndex==prodSku&&(itemElement.hasOwnProperty("dimension19")&&(dimension19=itemElement.dimension19),itemElement.hasOwnProperty("dimension21")&&(dimension21=itemElement.dimension21),itemElement.hasOwnProperty("dimension22")&&(dimension22=itemElement.dimension22)),itemElement.hasOwnProperty("dimension20")&&(dimension20=itemElement.dimension20),itemElement.hasOwnProperty("dimension18")&&(dimension18=itemElement.dimension18)})),window.nms_tracker&&(dimension18=window.nms_tracker),1==bannerPromo?"undefined"!=typeof bannerPromoTag&&(bannerPromoTag(),null!=window.dimension18&&(dimension18=window.dimension18)):(window.dimension24=null,window.dimension25=null,window.dimension26=null,window.dimension27=null),null!=existingDimension21&&(dimension21=existingDimension21),null!=existingDimension22&&(dimension22=existingDimension22),productJson={name:prod.display_name,id:prod.product_code,price:prod.selling_price,brand:brand,category:main_category,quantity:prod.qty,dimension18:dimension18,dimension19:dimension19,dimension20:dimension20,dimension21:"RRL",dimension22:!1,dimension24:window.dimension24,dimension25:window.dimension25,dimension26:window.dimension26,dimension27:window.dimension27},""!=prod_position&&(productJson.position=parseInt(prod_position)),""!=dimension21&&null!=dimension21&&"RIL"!=dimension21&&(productJson.dimension21=dimension21),""!=dimension22&&0!=dimension22&&null!=dimension22&&(productJson.dimension22="string"!=typeof dimension22||"1"!==dimension22||Boolean(parseInt(dimension22))),dataLayer.push({ecommerce:null}),dataLayer.push({event:"ecom_addToCart",add_type:"regular",journey:window.journeyData,ecommerce:{add:{actionField:{list:window.nms_tracker},products:[productJson]}},customer:customer}),cartTracker=null!=localStorage.getItem("nms_promo_cart")&&""!=localStorage.getItem("nms_promo_cart")?JSON.parse(localStorage.getItem("nms_promo_cart")):{},cartTracker[prod.product_code]=productJson,$.isEmptyObject(cartTracker)?localStorage.removeItem("nms_promo_cart"):localStorage.setItem("nms_promo_cart",JSON.stringify(cartTracker))}}if(localStorage.getItem("jio_ads_clickid")){var click_track=[];if(localStorage.getItem("jio_ads_conversion")&&(click_track=JSON.parse(localStorage.getItem("jio_ads_conversion"))),click_track.push({sku:sku,clickid:localStorage.getItem("jio_ads_clickid")}),localStorage.setItem("jio_ads_conversion",JSON.stringify(click_track)),JioAds){var click_id=localStorage.getItem("jio_ads_clickid");JioAds.fireConversionApi(click_id,"1"),localStorage.removeItem("jio_ads_clickid")}}}function trackClickAlgoliaInsight(product_sku,queryId){if(queryId&&""!=queryId){var user_id=localStorage.getItem("userid");0!=user_id&&null!=user_id||(user_id=$.cookie("_ALGOLIA")?$.cookie("_ALGOLIA"):"0");var pos_elem=".product-add-form",current=$("button[data-sku='"+product_sku+"']").closest(pos_elem),position=$(pos_elem).index(current);position=parseInt(position)+1;var index_name=window.algolia_suffix+"_master_vertical";localStorage.getItem("nms_alg_indexname")&&(index_name=localStorage.getItem("nms_alg_indexname"));var src=["msite"];"jiomartapp"==$.cookie("nms_refer_lite")&&(src=["jiomartapp"]),"jio"==$.cookie("nms_refer_lite")&&(src=["myjioapp"]),src.push(localStorage.getItem("nms_mgo_pincode"));var master_code=window.default_vertical_city_code;for(var vertical in localStorage.getItem("jio_region_codes")&&(master_code=JSON.parse(localStorage.getItem("jio_region_codes"))),master_code)if(null!=master_code[vertical])for(let k in master_code[vertical])src.push(master_code[vertical][k]);let track_text="Added to Cart";($("body").hasClass("otc-list-page")||$("body").hasClass("search-result-page"))&&(track_text="Add to cart from listing"),aa("clickedObjectIDsAfterSearch",{userToken:user_id,eventName:track_text,index:index_name,queryID:queryId,objectIDs:[product_sku],positions:[position],analyticsTags:src})}}function trackAlgoliaInsight(product_sku,queryId){if(queryId&&""!=queryId){var user_id=localStorage.getItem("userid");0!=user_id&&null!=user_id||(user_id=$.cookie("_ALGOLIA")?$.cookie("_ALGOLIA"):"0");var index_name=window.algolia_suffix+"_master_vertical";localStorage.getItem("nms_alg_indexname")&&(index_name=localStorage.getItem("nms_alg_indexname"));var src=["msite"];"jiomartapp"==$.cookie("nms_refer_lite")&&(src=["jiomartapp"]),"jio"==$.cookie("nms_refer_lite")&&(src=["myjioapp"]),src.push(localStorage.getItem("nms_mgo_pincode"));var master_code=window.default_vertical_city_code;for(var vertical in localStorage.getItem("jio_region_codes")&&(master_code=JSON.parse(localStorage.getItem("jio_region_codes"))),master_code)if(null!=master_code[vertical])for(let k in master_code[vertical])src.push(master_code[vertical][k]);let track_text="Added to Cart";($("body").hasClass("otc-list-page")||$("body").hasClass("search-result-page"))&&(track_text="Add to cart from listing"),aa("convertedObjectIDsAfterSearch",{userToken:user_id,eventName:track_text,index:index_name,queryID:queryId,objectIDs:[product_sku],analyticsTags:src})}}function applyPlusMinusButton(bundle_class=""){var cart_info=JSON.parse(localStorage.getItem("cart_info"));if(localStorage.getItem("jio_store_id"))var cart_info=JSON.parse(localStorage.getItem("pickup_cart_info"));var parentElement="",parentInCart=!1;if(cart_info){var productId=$(".otc-product-page #product_id").val();null!=productId&&null!=productId&&(parentInCart=IsproductInCart(productId));var cart_prods=cart_info.cart.lines;$(cart_prods).each((function(i,prod){if(prod.qty>0){var sku=prod.product_code;if(""!=bundle_class){var element=$(bundle_class+" .addtocartbtn[data-promosku='"+sku+"']");parentElement=$(".addtocartbtn[data-sku='"+sku+"']")}else var element=$(".addtocartbtn[data-sku='"+sku+"']");element.length>0&&CartElementUpdate(sku,element,prod,bundle_class,parentInCart),parentElement.length>0&&CartElementUpdate(sku,parentElement,prod,bundle_class,parentInCart)}}))}}function CartElementUpdate(sku,element,prod,bundle_class="",parentInCart=!1){if(sku&&element.length>0){var qty=prod.qty,max_qty=prod.max_qty_in_order,stock_qty=prod.stock_qty,max_allowed=max_qty;stock_qty<max_qty&&(max_allowed=stock_qty),$(element).each((function(i,elem){var prodpage=!1;$(elem).hasClass("prodbtn")&&(prodpage=!0);var vertical=$("#vertical_code").val();if(1==prodpage&&"ELECTRONICS"==vertical){if(1==qty&&max_allowed>1&&prod.promotions&&"FREE_ITEM_LEVEL"==prod.promotions[0].ui_hint)$(elem).attr("disabled",!1);else if(sku&&$(bundle_class+" .addtocartbtn[data-parent='"+sku+"']").length>0){var childSku=$(bundle_class+" .addtocartbtn[data-parent='"+sku+"']").attr("data-promosku");if(null!=childSku&&null!=childSku&&""!=childSku){var Incart=!1;(Incart=IsproductInCart(childSku))&&($($(bundle_class+" .addtocartbtn[data-promosku='"+childSku+"']")).closest(".product-card-wrapper").find(".is_cart_status").addClass("active"),$($(bundle_class+" .addtocartbtn[data-promosku='"+childSku+"']")).closest(".cart_btn").html('<button class="jm-btn primary success small jm-body-s-bold" onclick="location.href=`/checkout/cart`" > <img class="icon jm-mr-xxs" src="/assets/ds2msite/jds-icons/check-icon.svg" alt="" /> <span  class="jm-fc-light-feedback-success-80"> In Cart </span> </button>'))}}}else if("#pdp_bundle_deals_products"==bundle_class)"ELECTRONICS"==vertical&&parentInCart&&(1==qty&&max_allowed>1&&prod.promotions&&prod.promotions[0].ui_hint,$(elem).closest(".product-card-wrapper").find(".is_cart_status").addClass("active"),$(elem).closest(".cart_btn").html('<button class="jm-btn primary success small jm-body-s-bold" onclick="location.href=`/checkout/cart`"> <img class="icon jm-mr-xxs" src="/assets/ds2msite/jds-icons/check-icon.svg" alt="" /> <span  class="jm-fc-light-feedback-success-80"> In Cart </span> </button>'));else if(1==qty&&max_allowed>1&&prod.promotions&&"FREE_ITEM_LEVEL"==prod.promotions[0].ui_hint)"#pdp_best_deals_products"==bundle_class?($("#pdp_best_deals_products .addtocartbtn").prop("disabled",!0),$(elem).prop("disabled",!1)):$(elem).attr("disabled",!1);else{if(prod.promotions&&"FREE_ITEM_LEVEL"==prod.promotions[0].ui_hint&&(qty-=1,max_allowed+=1),"#pdp_best_deals_products"==bundle_class)$(elem).closest(".pdp_deals_promo").find(".product-card-wrapper").addClass("jm-disable"),$(elem).closest(".pdp_deals_promo").find(".addtocartbtn").prop("disabled",!0),null!=$(elem).closest(".product-card-wrapper").attr("data-promoId")&&null!=$(elem).closest(".product-card-wrapper").attr("data-promoId")&&null!=$("#item_pdp_best_deals_"+sku+"_"+$(elem).closest(".product-card-wrapper").attr("data-promoId"))&&null!=$("#item_pdp_best_deals_"+sku+"_"+$(elem).closest(".product-card-wrapper").attr("data-promoId"))&&($("#item_pdp_best_deals_"+sku+"_"+$(elem).closest(".product-card-wrapper").attr("data-promoId")).find(".is_cart_status").addClass("active"),$("#item_pdp_best_deals_"+sku+"_"+$(elem).closest(".product-card-wrapper").attr("data-promoId")).removeClass("jm-disable")),$(elem).replaceWith(` <button data-sku="${sku}" class="jm-btn small qty_minus secondary cart_remove full-width jm-body-s-bold jm-jc-center" data-max="${max_allowed}" data-qty="${qty}"> Remove </button>`);else if($(elem).hasClass("jm-btn")){let minusclass=$(elem).parent().attr("data-minusclass"),plusclass=$(elem).parent().attr("data-plusclass"),countclass=$(elem).parent().attr("data-countclass"),is_prod_btn=$(elem).parent().hasClass("prodpage");is_prod_btn&&$(elem).parent().removeClass("product-footer-item").addClass("product-footer-item-added"),$(elem).replaceWith(`<button class="jm-btn ${minusclass} qty_minus" data-sku="${sku}">\n\t\t\t\t\t\t\t\t\t<img src="/assets/ds2msite/jds-icons/minus-icon.svg" alt="remove button" />\n\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t<div class="${countclass}">${qty}</div>\n\t\t\t\t\t\t\t\t<button class="jm-btn ${plusclass} qty_plus ${max_allowed==qty?"disabled":""}" data-sku="${sku}" data-max="${max_allowed}">\n\t\t\t\t\t\t\t\t\t<img src="/assets/ds2msite/jds-icons/add-${is_prod_btn?"white-":""}icon.svg" alt="add button" />\n\t\t\t\t\t\t\t\t</button>`)}else $(elem).replaceWith(`\n\t\t\t\t\t\t\t\t\t<div class="cart_plus_minus">\n\t\t\t\t\t\t\t\t\t\t<button type="button" data-sku="${sku}" class="qtybtn qty_add qty_minus ${prodpage?"prodminus":""}">-</button>\n\t\t\t\t\t\t\t\t\t\t<span class="qty_count">${qty}</span>\n\t\t\t\t\t\t\t\t\t\t<button type="button" data-sku="${sku}" ${max_allowed==qty?"disabled":""} data-max="${max_allowed}" class="qtybtn qty_add qty_plus">+</button>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t`);"#pdp_best_deals_products"==bundle_class&&($("#pdp_best_deals_products .addtocartbtn").prop("disabled",!0),$(elem).prop("disabled",!1))}}))}}function IsproductInCart(sku=""){if(""!=sku){var InCart=!1,cart_info=JSON.parse(localStorage.getItem("cart_info"));if(localStorage.getItem("jio_store_id"))var cart_info=JSON.parse(localStorage.getItem("pickup_cart_info"));return cart_info&&$(cart_info.cart.lines).each((function(index,prodItem){if(prodItem.hasOwnProperty("product_code")&&null!=prodItem.product_code&&sku==prodItem.product_code)return InCart=!0,!1})),InCart}return!1}function IsDependentproductInCart(sku="",depends_on=""){if(""!=sku){var InCart=!1,cart_info=JSON.parse(localStorage.getItem("cart_info"));if(localStorage.getItem("jio_store_id"))var cart_info=JSON.parse(localStorage.getItem("pickup_cart_info"));return cart_info&&$(cart_info.cart.lines).each((function(index,prodItem){if(prodItem.hasOwnProperty("product_code")&&null!=prodItem.product_code&&sku==prodItem.product_code){if(""==depends_on)return InCart=!0,!1;if(prodItem.hasOwnProperty("ext")&&null!=prodItem.ext&&prodItem.ext.hasOwnProperty("depends_on")&&null!=prodItem.ext.depends_on)return prodItem.ext.depends_on.includes(depends_on)?(InCart=!0,!1):(InCart=!1,!1)}})),InCart}return!1}function buynowItem(add_on_status,jioOffer,mainObj){var qty=1,sku=mainObj.attr("data-sku");if(localStorage.setItem("buynow_product",sku),localStorage.getItem("authtokenexpire")){var today=new Date,expiry=localStorage.getItem("authtokenexpire"),expiry_date=new Date(expiry);today.getTime()>expiry_date.getTime()&&("jiomartapp"==$.cookie("nms_refer_lite")?app_sendToApp({type:"refreshJMAuthenticationToken"}):(localStorage.removeItem("userid"),localStorage.removeItem("authtoken")))}if(null==localStorage.getItem("userid")||"0"==localStorage.getItem("userid")){var all_sku=[];all_sku.push(sku),window.free_service&&$(window.free_service).each((function(i,val){all_sku.push(val)}));var all_prod_sku=all_sku.join(",");localStorage.setItem("buynowdata",all_prod_sku),1==add_on_status&&$("#elec_addon_dialog").length>0?(mainObj.attr("disabled",!1),reset_addon_selection(),$("body").addClass("disable-scroll"),$("#elec_addon_dialog").addClass("jm-bottomsheet-visible"),$("#elec_addon_dialog").attr("data-source","buynow")):window.location.href="/customer/account/login"}else{let add_to_universal_cart=!0,get_5g_sim=$("#5g_sim_required").prop("checked"),source=mainObj.attr("data-source");if(1!=get_5g_sim&&"true"!=jioOffer||(add_to_universal_cart=!1),"1"==window.exchange_status&&localStorage.getItem("jio_exchange_details")){let new_exchange=JSON.parse(localStorage.getItem("jio_exchange_details"));new_exchange.product_id==sku&&new_exchange.imei_validated&&new_exchange.quote_id&&""!=new_exchange.quote_id&&(add_to_universal_cart=!1)}if(!0===add_to_universal_cart){var cart_info=localStorage.getItem("cart_info"),exists_in_univ_cart=!1,universal_cart,status;if(cart_info){var cart_products=JSON.parse(cart_info);if(cart_products.cart.lines){var cart_prods=cart_products.cart.lines;if(cart_prods.length>0)for(var i=0;i<cart_prods.length;i++)cart_prods[i].product_code==sku&&(exists_in_univ_cart=!0)}}if(0==exists_in_univ_cart)if((status=handle_add_to_cart(1,sku,universal_cart=!0))&&window.free_service.length>0){var free_prods=window.free_service;$(free_prods).each((function(i,val){var main_sku,status=perform_add_to_cart(1,val,0,$("#main_product_id").val())})),get_cart_details(!0)}}var exists_in_buynow_cart=!1;localStorage.removeItem("paynowID"),localStorage.removeItem("buy_now_cart_info");var universal_cart=!1,status,lock_options;if(localStorage.getItem("paynowID"))var cart_status=!0;else var cart_status=create_universal_cart(universal_cart);if(cart_status)if(status=handle_add_to_cart(1,sku,universal_cart)){if("1"==window.exchange_status&&localStorage.getItem("jio_exchange_details")){let new_exchange=JSON.parse(localStorage.getItem("jio_exchange_details"));if(new_exchange.product_id==sku&&new_exchange.imei_validated&&new_exchange.quote_id&&""!=new_exchange.quote_id){let exch_cart_id;add_exchange_product(sku,localStorage.getItem("paynowID"))}}if(1==add_on_status&&$("#elec_addon_dialog").length>0){if(mainObj.attr("disabled",!1),reset_addon_selection(),$("body").addClass("disable-scroll"),$("#elec_addon_dialog").addClass("jm-bottomsheet-visible"),$("#elec_addon_dialog").attr("data-source","buynow"),window.free_service.length>0){var free_prods=window.free_service;$(free_prods).each((function(i,val){var cart_id,main_sku,status=perform_add_to_cart(1,val,localStorage.getItem("paynowID"),$("#main_product_id").val())})),get_cart_details(!1)}}else{if("true"==jioOffer){var buySuccess=!1,lock_options;if(null!=localStorage.getItem("lock_options"))if((lock_options=JSON.parse(localStorage.getItem("lock_options")))&&Object.keys(lock_options).length>0)if(null!=localStorage.getItem("paynowID")&&""!=localStorage.getItem("paynowID"))var buySuccess=lockedProduct(localStorage.getItem("lock_options"),localStorage.getItem("paynowID"));else var buySuccess=lockedProduct(localStorage.getItem("lock_options"),!1);1==buySuccess&&get_cart_details(!1)}else get_cart_details(!1);window.location.href="/checkout/review"}}else mainObj.attr("disabled",!1),mainObj.attr("data-source","")}}function remove_cart_items(sku,qty){var userid=localStorage.getItem("userid"),authtoken=localStorage.getItem("authtoken"),pincode=localStorage.getItem("nms_mgo_pincode"),api_url=$("#mst_api_cart_pin_baseurl").val(),d,n,cart_data={product_code:sku,qty:qty,n:(new Date).getTime()};localStorage.getItem("paynowID")&&(cart_data.cart_id=localStorage.getItem("paynowID"));var cart_resp=!1;return $.ajax({url:api_url+"cart/remove_item",data:cart_data,headers:{userid:userid,authtoken:authtoken,pin:pincode},async:!1,method:"GET",dataType:"JSON",success:function(resp){"success"==resp.status&&(cart_resp=!0)},error:function(xhr,status,error){xhr.responseJSON&&(cart_resp=!1)}}),cart_resp}function onJioPopLoad(){var newJio;$('input:radio[name="new_jio"]:checked').length>0?$(".jiocashback-submit").prop("disabled",!1):$(".jiocashback-submit").prop("disabled",!0),$("#exist_number-error").text(""),$("#port_number-error").text(""),$("#port_number").prop("readonly",!0),$("#exist_number").prop("readonly",!0);var prodbuySku=$(".buynowbtn").attr("data-sku"),lock_options=localStorage.getItem("lock_options"),lockedValues="";null!=lock_options?""!=(lockedValues=JSON.parse(lock_options))&&""!=prodbuySku&&""!=lockedValues.product_code&&(lockedValues.product_code!=prodbuySku?$("#jiocashback_form").length>0&&$("#jiocashback_form")[0].reset():1==lockedValues.locked_phone&&($("#product_custype").val(null),$("#locked_phone").val("true"),null!=lockedValues.customer_type&&($(".jio-offer-details .offer-applied-btn").show(),$(".cart-action").hide(),"mnp"==lockedValues.customer_type?($("#mnp_number").prop("checked",!0),$("#product_custype").val("mnp"),$("#port_number").prop("readonly",!1),null!=lockedValues.mnp_source_number&&(""!=lockedValues.mnp_source_number&&null!=lockedValues.mnp_source_number?($("#port_number").val(lockedValues.mnp_source_number),$("#mnp_source_number").val(lockedValues.mnp_source_number)):($("#mnp_source_number").val(null),$("#port_number").val("")))):"existing"==lockedValues.customer_type?($("#existing_jio").prop("checked",!0),$("#product_custype").val("existing"),$("#exist_number").prop("readonly",!1),null!=lockedValues.mnp_source_number&&(""!=lockedValues.mnp_source_number&&null!=lockedValues.mnp_source_number?($("#exist_number").val(lockedValues.mnp_source_number),$("#mnp_source_number").val(lockedValues.mnp_source_number)):($("#mnp_source_number").val(null),$("#exist_number").val("")))):"new"==lockedValues.customer_type&&($("#new_jio").prop("checked",!0),$("#product_custype").val("new"))))):($("#jiocashback_form").length>0&&$("#jiocashback_form")[0].reset(),$(".jio-offer-details .lockedprodbtn").show(),$(".jio-offer-terms-cond").show(),$(".cart-action").show(),$(".jio-offer-details .offer-applied-btn").hide())}function onJioPopClose(){$(".jiocashback-submit").prop("disabled",!0)}function lockedProduct(offer_obj,cartID){var api_url=$("#mst_api_cart_pin_baseurl").val();if(0!=cartID)var cartUrl=api_url+"cart/set_poj?cart_id="+cartID;else var cartUrl=api_url+"cart/set_poj";var userid=localStorage.getItem("userid"),authtoken=localStorage.getItem("authtoken"),ObjString={},resultant=!1;if(null!=userid&&"0"!=userid&&null!=authtoken&&""!=authtoken){if(offer_obj){var lock_options=JSON.parse(offer_obj);if(1==lock_options.locked_phone)if($("#product_custype").val(null),$("#locked_phone").val("true"),null!=lock_options.customer_type){if($(".jio-offer-details .offer-applied-btn").show(),$(".jio-offer-details .lockedprodbtn").hide(),$(".jio-offer-terms-cond").hide(),"new"==lock_options.customer_type)var customerTypes="new";else if("existing"==lock_options.customer_type)var customerTypes="existing";else if("mnp"==lock_options.customer_type)var customerTypes="mnp";else var customerTypes=null;var itemCode=$(".buynowbtn").attr("data-sku").toString();""!=lock_options.product_code&&(itemCode=lock_options.product_code.toString()),ObjString=""!=lock_options.mnp_source_number?""!=lock_options.product_code?'{"locked_phone_info":{ "'+itemCode+'": {"locked_phone":'+!0+',"customer_type":"'+customerTypes+'","mnp_source_number":"'+lock_options.mnp_source_number+'"}}}':'{"locked_phone":true,"customer_type":"'+customerTypes+'","mnp_source_number":"'+lock_options.mnp_source_number+'"}':""!=lock_options.product_code?'{"locked_phone_info":{ "'+itemCode+'": {"locked_phone":'+!0+',"customer_type":"'+customerTypes+'","mnp_source_number":""}}}':'{"locked_phone":true,"customer_type":"'+customerTypes+'","mnp_source_number":""}'}else ObjString=""!=lock_options.product_code?'{"locked_phone_info":{ "'+itemCode+'": {"locked_phone":'+!0+',"customer_type":"","mnp_source_number":""}}}':'{"locked_phone":true,"customer_type":"","mnp_source_number":""}'}$.ajax({url:cartUrl,data:ObjString,dataType:"JSON",type:"POST",headers:{userid:userid,authtoken:authtoken,"Content-Type":"application/json"},async:!1,success:function(responce){"success"==responce.status&&(localStorage.removeItem("lock_options"),console.log(responce.status),resultant=!0)},error:function(error){console.log(JSON.stringify(error))}})}return resultant}function ucfirst(str,force){return(str=force?str.toLowerCase():str).replace(/(\b)([a-zA-Z])/,(function(firstLetter){return firstLetter.toUpperCase()}))}function promoItemRemoval(id){if(null!=localStorage.getItem("nms_promo_cart")&&""!=localStorage.getItem("nms_promo_cart")){var data=JSON.parse(localStorage.getItem("nms_promo_cart"));data.hasOwnProperty(id)&&delete data[id],$.isEmptyObject(data)?localStorage.removeItem("nms_promo_cart"):localStorage.setItem("nms_promo_cart",JSON.stringify(data))}}function buynow_cart_success(){var cartInfo=localStorage.getItem("buy_now_cart_info"),category="",sub_category="",brand="",dimension21="RRL",dimension22=!1,bannerPromo=!0,product_section="",sku="",prod_position="";if(""!=(sku=null!=localStorage.getItem("buynow_product")&&null!=localStorage.getItem("buynow_product")&&""!=localStorage.getItem("buynow_product")?localStorage.getItem("buynow_product"):"")&&cartInfo){if(localStorage.removeItem("buynow_product"),null!=(product_section=$(".buynowbtn").closest("section").attr("data-tracker"))&&null!=product_section&&""!=product_section){var itemDiv=null;$(".buynowbtn").closest("section#cart_section").length>0&&null!=(itemDiv=$(".buynowbtn").closest("section#cart_section"))&&null!=itemDiv&&(category=null!=itemDiv.find("#data-cate").val()?itemDiv.find("#data-cate").val():"",sub_category=null!=itemDiv.find("#data-subcate").val()?itemDiv.find("#data-subcate").val():"",brand=null!=itemDiv.find("#data-manu").val()?itemDiv.find("#data-manu").val():"",dimension21=null!=itemDiv.find("#data-sellername").val()?itemDiv.find("#data-sellername").val():"",dimension22=null!=itemDiv.find("#data-3p-available").val()?itemDiv.find("#data-3p-available").val():"",prod_position=null!=itemDiv.find("#data-position").val()?itemDiv.find("#data-position").val():"")}var existingDimension21=dimension21,existingDimension22=dimension22,gtmStatus;if("1"==document.getElementById("gtm_status").value){var cart_products=JSON.parse(cartInfo);if(dataLayer&&cart_products.cart.lines)for(var products=cart_products.cart.lines,i=0;i<products.length;i++)if(products[i].product_code==sku){var prod=products[i],customer={};0!=localStorage.getItem("userid")&&null!=localStorage.getItem("userid")?(customer.isLoggedIn=!0,customer.id=localStorage.getItem("userid"),localStorage.getItem("displayemail")&&(customer.email=$.md5(localStorage.getItem("displayemail"))),localStorage.getItem("new_customer")&&(customer.new_customer=localStorage.getItem("new_customer")),customer.city="NA",localStorage.getItem("nms_mgo_city")&&(customer.city=localStorage.getItem("nms_mgo_city").toUpperCase())):(customer.isLoggedIn=!1,customer.city="NA",localStorage.getItem("nms_mgo_city")&&(customer.city=localStorage.getItem("nms_mgo_city").toUpperCase()));var zipCode="NA";localStorage.getItem("nms_mgo_pincode")&&(zipCode=localStorage.getItem("nms_mgo_pincode"));var main_category="";prod.vertical_code&&(main_category+=ucfirst(prod.vertical_code,!0)),category&&(main_category+="/"+category),sub_category&&(main_category+="/"+sub_category),"undefined"!=typeof journeyDataLayer&&journeyDataLayer();var prodSku=prod.product_code,dimension19="FALSE",dimension20=null,dimension18=null;let productJson={},cartTracker;$.isEmptyObject(window.searchKeyData)||$.each(JSON.parse(window.searchKeyData),(function(itemIndex,itemElement){prodSku&&itemIndex==prodSku&&(itemElement.hasOwnProperty("dimension19")&&(dimension19=itemElement.dimension19),itemElement.hasOwnProperty("dimension21")&&(dimension21=itemElement.dimension21),itemElement.hasOwnProperty("dimension22")&&(dimension22=itemElement.dimension22)),itemElement.hasOwnProperty("dimension20")&&(dimension20=itemElement.dimension20),itemElement.hasOwnProperty("dimension18")&&(dimension18=itemElement.dimension18),itemElement.hasOwnProperty("position")&&(prod_position=itemElement.position)})),window.nms_tracker&&(dimension18=window.nms_tracker),"undefined"!=typeof bannerPromoTag&&(bannerPromoTag(),null!=window.dimension18&&(dimension18=window.dimension18)),null!=existingDimension21&&(dimension21=existingDimension21),null!=existingDimension22&&(dimension22=existingDimension22),productJson={name:prod.display_name,id:prod.product_code,price:prod.selling_price,brand:brand,category:main_category,quantity:prod.qty,dimension18:dimension18,dimension19:dimension19,dimension20:dimension20,dimension21:"RRL",dimension22:!1,dimension24:window.dimension24,dimension25:window.dimension25,dimension26:window.dimension26,dimension27:window.dimension27},""!=prod_position&&(productJson.position=prod_position),""!=dimension21&&null!=dimension21&&"RIL"!=dimension21&&(productJson.dimension21=dimension21),""!=dimension22&&0!=dimension22&&null!=dimension22&&(productJson.dimension22="string"!=typeof dimension22||"1"!==dimension22||Boolean(parseInt(dimension22))),dataLayer.push({ecommerce:null}),dataLayer.push({event:"ecom_addToCart",add_type:"buy now",journey:window.journeyData,ecommerce:{add:{actionField:{list:window.nms_tracker},products:[productJson]}},customer:customer}),cartTracker=null!=localStorage.getItem("nms_promo_cart")&&""!=localStorage.getItem("nms_promo_cart")?JSON.parse(localStorage.getItem("nms_promo_cart")):{},cartTracker[prod.product_code]=productJson,$.isEmptyObject(cartTracker)?localStorage.removeItem("nms_promo_cart"):localStorage.setItem("nms_promo_cart",JSON.stringify(cartTracker))}}}}async function add_exchange_product(sku,cart_id){let status=!1,api_url=$("#mst_api_cart_pin_baseurl").val(),new_exchange=JSON.parse(localStorage.getItem("jio_exchange_details"));-1==new_exchange.valid_till.indexOf("T")&&(new_exchange.valid_till=new_exchange.valid_till.replace(/ /g,"T")),-1!==new_exchange.valid_till.indexOf(".")&&(new_exchange.valid_till=new_exchange.valid_till.slice(0,-5));let valid_till=new_exchange.valid_till;return localStorage.setItem("jio_exchange_details",JSON.stringify(new_exchange)),$.ajax({url:api_url+"cart/add_exchange",method:"GET",async:!1,data:{cart_id:cart_id,cart_product_code:sku,quote_id:new_exchange.quote_id,exchange_value:parseFloat(new_exchange.exchange_value),exchange_product_name:new_exchange.model,valid_till_time:valid_till},headers:{userid:localStorage.getItem("userid"),authtoken:localStorage.getItem("authtoken")},dataType:"JSON",success:function(resp){status=resp.status},error:function(){status=!1}}),await Promise.resolve(status)}async function remove_exchange_product(cart_info){let status=!0,lines=cart_info.lines;return lines.length>0&&lines.map(line=>{if(line.exchange_details){let cart_id=cart_info.id,sku=line.product_code,api_url=$("#mst_api_cart_pin_baseurl").val();$.ajax({url:api_url+"cart/remove_exchange",method:"GET",async:!1,data:{cart_id:cart_id,cart_product_code:sku},headers:{userid:localStorage.getItem("userid"),authtoken:localStorage.getItem("authtoken")},dataType:"JSON",success:function(resp){status=resp.status},error:function(){status=!1}})}}),await Promise.resolve(status)}$(document).on("click",".qty_minus",(function(ev){ev.stopPropagation();var minus_btn=$(this);minus_btn.prop("disabled",!0);var sku=minus_btn.attr("data-sku");if(minus_btn.hasClass("cart_remove")){var current_qty=null!=minus_btn.attr("data-qty")&&null!=minus_btn.attr("data-qty")&&""!=minus_btn.attr("data-qty")?parseInt(minus_btn.attr("data-qty")):0,qty=1;$(this).closest(".pdp_deals_promo").find(".addtocartbtn").prop("disabled",!1),$(this).closest(".pdp_deals_promo").find(".is_cart_status").remove("active"),$(this).closest(".pdp_deals_promo").find(".product-card-wrapper").length>0&&$(this).closest(".pdp_deals_promo").find(".product-card-wrapper").removeClass("jm-disable")}else var current_qty=parseInt(minus_btn.next().text()),qty=1;var bannerPromo=!0,userid=localStorage.getItem("userid"),authtoken=localStorage.getItem("authtoken"),pincode=localStorage.getItem("nms_mgo_pincode"),api_url=$("#mst_api_cart_pin_baseurl").val(),d,n=(new Date).getTime(),category="",sub_category="",brand="",prodInCart=!0,dimension21="RRL",dimension22=!1,prod_position="",bestCart="";($("body").hasClass("otc-list-page")||$("body").hasClass("search-result-page"))&&($(this).closest(".main-content").find(".plp_product_list").length>0&&$(this).closest(".plp_product_list")&&($("#mstar_box").length>0&&$("#mstar_box").is(":visible")&&(prod_position=$($(this).closest("#mstar_box").find(".plp_product_list")).index($(this).closest("#mstar_box .plp_product_list"))+1),$("#algolia_box").length>0&&$("#algolia_box").is(":visible")&&(prod_position=$($(this).closest("#algolia_box").find(".plp_product_list")).index($(this).closest("#algolia_box .plp_product_list"))+1)),$(this).closest("#algolia_hits").find(".product-item-info").length>0&&(prod_position=$($(this).closest("#algolia_hits").find(".plp_product_list")).index($(this).closest(".plp_product_list"))+1));var sectionTitle=$(this).closest("section").attr("data-tracker");null!=sectionTitle&&null!=sectionTitle&&""!=sectionTitle&&$(this).closest("section").find(".swiper-slide").length>0&&(prod_position=$($(this).closest("section").find(".swiper-slide")).index($(this).closest(".swiper-slide"))+1);var product_section=$(this).closest("section").attr("data-tracker");if(null!=product_section&&null!=product_section&&""!=product_section){var itemDiv=null;$(this).closest(".pdp_product_list").length>0&&null!=(itemDiv=$(this).closest(".pdp_product_list"))&&null!=itemDiv&&(prod_position=$($(this).closest("section").find(".pdp_product_list")).index($(this).closest(".pdp_product_list"))+1),$(this).closest(".widget_product_list").length>0&&null!=(itemDiv=$(this).closest(".widget_product_list"))&&null!=itemDiv&&(prod_position=$($(this).closest("section").find(".widget_product_list")).index($(this).closest(".widget_product_list"))+1),null!=itemDiv&&null!=itemDiv&&(category=null!=itemDiv.find(".gtmEvents").attr("data-cate")?itemDiv.find(".gtmEvents").attr("data-cate"):"",sub_category=null!=itemDiv.find(".gtmEvents").attr("data-subcate")?itemDiv.find(".gtmEvents").attr("data-subcate"):"",brand=null!=itemDiv.find(".gtmEvents").attr("data-manu")?itemDiv.find(".gtmEvents").attr("data-manu"):"",dimension21=null!=itemDiv.find(".gtmEvents").attr("data-sellername")?itemDiv.find(".gtmEvents").attr("data-sellername"):"",dimension22=null!=itemDiv.find(".gtmEvents").attr("data-3p-available")?itemDiv.find(".gtmEvents").attr("data-3p-available"):"",bannerPromo=!1)}if($("body").hasClass("otc-product-page")){if($(this).closest(".product-footer-wrapper").length>0){var trackTitle=$(this).closest(".product-footer-wrapper").find(".gtmEvents").attr("data-tracker");null!=trackTitle&&null!=trackTitle&&""!=trackTitle&&(window.nms_tracker=trackTitle,localStorage.removeItem("nms_product_tracker")),itemProdDiv=$(this).closest(".product-footer-wrapper"),null!=itemProdDiv&&null!=itemProdDiv&&(category=null!=itemProdDiv.find(".gtmEvents").attr("data-cate")?itemProdDiv.find(".gtmEvents").attr("data-cate"):"",sub_category=null!=itemProdDiv.find(".gtmEvents").attr("data-subcate")?itemProdDiv.find(".gtmEvents").attr("data-subcate"):"",brand=null!=itemProdDiv.find(".gtmEvents").attr("data-manu")?itemProdDiv.find(".gtmEvents").attr("data-manu"):"",dimension21=null!=itemProdDiv.find(".gtmEvents").attr("data-sellername")?itemProdDiv.find(".gtmEvents").attr("data-sellername"):"",dimension22=null!=itemProdDiv.find(".gtmEvents").attr("data-3p-available")?itemProdDiv.find(".gtmEvents").attr("data-3p-available"):"",prod_position=null!=itemProdDiv.find(".gtmEvents").attr("data-position")?itemProdDiv.find(".gtmEvents").attr("data-position"):"")}null!=$(this).closest(".pdp_deals_promo")&&null!=$(this).closest(".pdp_deals_promo").attr("id")&&(bestCart="#"+$(this).closest(".pdp_deals_promo").attr("id"),$(this).closest(bestCart+" .bestdeals_content")&&(category=null!=$(this).closest(".swiper-slide").find(".gtmEvents").attr("data-cate")?$(this).closest(".swiper-slide").find(".gtmEvents").attr("data-cate"):"",sub_category=null!=$(this).closest(".swiper-slide").find(".gtmEvents").attr("data-subcate")?$(this).closest(".swiper-slide").find(".gtmEvents").attr("data-subcate"):"",brand=null!=$(this).closest(".swiper-slide").find(".gtmEvents").attr("data-manu")?$(this).closest(".swiper-slide").find(".gtmEvents").attr("data-manu"):"",dimension21=null!=$(this).closest(".swiper-slide").find(".gtmEvents").attr("data-sellername")?$(this).closest(".swiper-slide").find(".gtmEvents").attr("data-sellername"):"",dimension22=null!=$(this).closest(".swiper-slide").find(".gtmEvents").attr("data-3p-available")?$(this).closest(".swiper-slide").find(".gtmEvents").attr("data-3p-available"):"",bannerPromo=!1,prod_position=$($(this).closest("section").find(".swiper-slide")).index($(this).closest(".swiper-slide"))+1))}($("body").hasClass("otc-manu-page")||$("body").hasClass("otc-category-page")||$("body").hasClass("otc-brand-page")||$("body").hasClass("search-result-page"))&&($("#actionField").length>0&&(window.nms_tracker=$("#actionField").val()),category=null!=$(this).closest(".plp_product_list").find(".gtmEvents").attr("data-cate")?$(this).closest(".plp_product_list").find(".gtmEvents").attr("data-cate"):"",sub_category=null!=$(this).closest(".plp_product_list").find(".gtmEvents").attr("data-subcate")?$(this).closest(".plp_product_list").find(".gtmEvents").attr("data-subcate"):"",brand=null!=$(this).closest(".plp_product_list").find(".gtmEvents").attr("data-manu")?$(this).closest(".plp_product_list").find(".gtmEvents").attr("data-manu"):"",dimension21=null!=$(this).closest(".plp_product_list").find(".gtmEvents").attr("data-sellername")?$(this).closest(".plp_product_list").find(".gtmEvents").attr("data-sellername"):"",dimension22=null!=$(this).closest(".plp_product_list").find(".gtmEvents").attr("data-3p-available")?$(this).closest(".plp_product_list").find(".gtmEvents").attr("data-3p-available"):""),$("body").hasClass("top-deals-list")&&$("#topdeal_page").length>0&&$(".data-tracker").length>0&&(category=null!=$(this).closest(".plp_product_list").find(".gtmEvents").attr("data-cate")?$(this).closest(".plp_product_list").find(".gtmEvents").attr("data-cate"):"",sub_category=null!=$(this).closest(".plp_product_list").find(".gtmEvents").attr("data-subcate")?$(this).closest(".plp_product_list").find(".gtmEvents").attr("data-subcate"):"",brand=null!=$(this).closest(".plp_product_list").find(".gtmEvents").attr("data-manu")?$(this).closest(".plp_product_list").find(".gtmEvents").attr("data-manu"):"",dimension21=null!=$(this).closest(".plp_product_list").find(".gtmEvents").attr("data-sellername")?$(this).closest(".plp_product_list").find(".gtmEvents").attr("data-sellername"):"",dimension22=null!=$(this).closest(".plp_product_list").find(".gtmEvents").attr("data-3p-available")?$(this).closest(".plp_product_list").find(".gtmEvents").attr("data-3p-available"):"",$(this).closest(".top-deals-list").find(".plp_product_list").length>0&&(prod_position=$($(this).closest(".top-deals-list").find(".plp_product_list")).index($(this).closest(".plp_product_list"))+1));var headers_data={userid:userid,authtoken:authtoken,pin:pincode};localStorage.getItem("jio_store_id")&&(headers_data.storecode=localStorage.getItem("jio_store_id"));var ajax_data={product_code:sku,qty:qty,n:n};if(localStorage.getItem("jio_store_id")&&localStorage.getItem("jio_pickup_cart_id")){var cart_id=localStorage.getItem("jio_pickup_cart_id");ajax_data.cart_id=cart_id}return $.ajax({url:api_url+"cart/remove_item",data:ajax_data,headers:headers_data,async:!1,method:"GET",dataType:"JSON",success:function(resp){if("success"==resp.status){if(current_qty-qty==0){if(minus_btn.hasClass("prodminus"))if(""!=bestCart&&"#pdp_best_deals_products"==bestCart){var btn_html=`<button class="jm-btn small secondary full-width jm-body-s-bold jm-jc-center addtocartbtn best_cart" data-sku="${sku}"> Add To Cart </button>`;$(bestCart+" .product-card-wrapper").find(".is_cart_status").removeClass("active")}else var btn_html=`<button type="button" title="ADD TO CART" class="toCart addtocartbtn prodbtn" data-sku="${sku}">\n\t\t\t\t\t\t\t\tAdd to Cart\n\t\t\t\t\t\t\t</button>`;else if(""!=bestCart&&"#pdp_best_deals_products"==bestCart){var btn_html=`<button class="jm-btn small secondary full-width jm-body-s-bold jm-jc-center addtocartbtn best_cart" data-sku="${sku}"> Add To Cart </button>`;$(bestCart+" .product-card-wrapper").find(".is_cart_status").removeClass("active")}else if(minus_btn.hasClass("jm-btn")){let parent_class=minus_btn.parent().attr("data-parentbtn-class"),parent_text=minus_btn.parent().attr("data-parentbtn-text"),parent_image=minus_btn.parent().attr("data-parentbtn-image"),is_prod_btn;minus_btn.parent().hasClass("prodpage")&&minus_btn.parent().removeClass("product-footer-item-added").addClass("product-footer-item");var btn_html=`<button class="jm-btn ${parent_class} addtocartbtn" data-sku="${sku}">\n\t\t\t\t\t\t\t\t\t${parent_text}\n\t\t\t\t\t\t\t\t\t${"1"==parent_image?'<img src="/assets/ds2web/jds-icons/add-icon.svg" alt="Add to cart" class="jm-ml-xs" />':""}\n\t\t\t\t\t\t\t\t</button>`}else var btn_html=`<button type="button" title="ADD TO CART" class="toCart addtocartbtn" data-sku="${sku}">\n\t\t\t\t\t\t\t\t\t<span class="txt_btn">ADD</span>\n\t\t\t\t\t\t\t\t\t<span class="add_plus"></span>\n\t\t\t\t\t\t\t\t</button>`;minus_btn.hasClass("jm-btn")?minus_btn.parent().html(btn_html):minus_btn.parent().parent().html(btn_html),prodInCart=!1}else minus_btn.prop("disabled",!1),minus_btn.next().next().prop("disabled",!1),minus_btn.next().next().removeClass("disabled"),minus_btn.next().text(current_qty-qty),""!=bestCart&&"#pdp_best_deals_products"==bestCart&&$("#pdp_best_deals_products .addtocartbtn").prop("disabled",!1);var gtmStatus;if("1"==document.getElementById("gtm_status").value){var cartInfo=localStorage.getItem("cart_info");if(localStorage.getItem("jio_store_id"))var cartInfo=localStorage.getItem("pickup_cart_info");if(cartInfo){var cart_products=JSON.parse(cartInfo);if(dataLayer&&cart_products.cart.lines)for(var products=cart_products.cart.lines,i=0;i<products.length;i++)if(products[i].product_code==sku){var prod=products[i],customer={};0!=localStorage.getItem("userid")&&null!=localStorage.getItem("userid")?(customer.isLoggedIn=!0,customer.id=localStorage.getItem("userid"),localStorage.getItem("displayemail")&&(customer.email=$.md5(localStorage.getItem("displayemail"))),localStorage.getItem("new_customer")&&(customer.new_customer=localStorage.getItem("new_customer")),customer.city="NA",localStorage.getItem("nms_mgo_city")&&(customer.city=localStorage.getItem("nms_mgo_city").toUpperCase())):(customer.isLoggedIn=!1,customer.city="NA",localStorage.getItem("nms_mgo_city")&&(customer.city=localStorage.getItem("nms_mgo_city").toUpperCase()));var zipCode="NA";localStorage.getItem("nms_mgo_pincode")&&(zipCode=localStorage.getItem("nms_mgo_pincode"));var main_category="";prod.vertical_code&&(main_category+=ucfirst(prod.vertical_code,!0)),category&&(main_category+="/"+category),sub_category&&(main_category+="/"+sub_category);var prodSku=prod.product_code,dimension19="FALSE",dimension20=null,dimension18=null;let productJson={};var existingDimension21=dimension21,existingDimension22=dimension22;$.isEmptyObject(window.searchKeyData)||$.each(JSON.parse(window.searchKeyData),(function(itemIndex,itemElement){prodSku&&itemIndex==prodSku&&(itemElement.hasOwnProperty("dimension19")&&(dimension19=itemElement.dimension19),itemElement.hasOwnProperty("dimension21")&&(dimension21=itemElement.dimension21),itemElement.hasOwnProperty("dimension22")&&(dimension22=itemElement.dimension22)),itemElement.hasOwnProperty("dimension20")&&(dimension20=itemElement.dimension20),itemElement.hasOwnProperty("dimension18")&&(dimension18=itemElement.dimension18)})),null!=existingDimension21&&(dimension21=existingDimension21),null!=existingDimension22&&(dimension22=existingDimension22),window.nms_tracker&&(dimension18=window.nms_tracker),"undefined"!=typeof journeyDataLayer&&journeyDataLayer(),1==bannerPromo?"undefined"!=typeof bannerPromoTag&&(bannerPromoTag(),null!=window.dimension18&&(dimension18=window.dimension18)):(window.dimension24=null,window.dimension25=null,window.dimension26=null,window.dimension27=null),productJson={name:prod.display_name,id:prod.product_code,price:prod.selling_price,brand:brand,category:main_category,quantity:1,dimension18:dimension18,dimension19:dimension19,dimension20:dimension20,dimension21:"RRL",dimension22:!1,dimension24:window.dimension24,dimension25:window.dimension25,dimension26:window.dimension26,dimension27:window.dimension27},""!=prod_position&&(productJson.position=parseInt(prod_position)),""!=dimension21&&null!=dimension21&&"RIL"!=dimension21&&(productJson.dimension21=dimension21),""!=dimension22&&0!=dimension22&&null!=dimension22&&(productJson.dimension22="string"!=typeof dimension22||"1"!==dimension22||Boolean(parseInt(dimension22))),dataLayer.push({ecommerce:null}),dataLayer.push({event:"ecom_removeFromCart",journey:window.journeyData,ecommerce:{remove:{products:[productJson]}},customer:customer}),0==prodInCart&&promoItemRemoval(prod.product_code)}}}get_cart_details(!0)}},error:function(xhr,status,error){if(xhr.responseJSON)var resp=xhr.responseJSON;else notify("Error occurred. Try again later","error")}}),!1})),$(document).on("click",".qty_plus",(function(ev){ev.stopPropagation();var plus_btn=$(this);if(plus_btn.hasClass("disabled"))return!1;plus_btn.prop("disabled",!0);var sku=plus_btn.attr("data-sku"),current_qty=parseInt(plus_btn.prev().text()),qty=1,cart_id=0,category="",sub_category="",brand="",dimension21="RRL",dimension22=!1,bannerPromo=!0,prod_position="";if(($("body").hasClass("otc-list-page")||$("body").hasClass("search-result-page"))&&($(this).closest(".main-content").find(".plp_product_list").length>0&&$(this).closest(".plp_product_list")&&($("#mstar_box").length>0&&$("#mstar_box").is(":visible")&&(prod_position=$($(this).closest("#mstar_box").find(".plp_product_list")).index($(this).closest("#mstar_box .plp_product_list"))+1),$("#algolia_box").length>0&&$("#algolia_box").is(":visible")&&(prod_position=$($(this).closest("#algolia_box").find(".plp_product_list")).index($(this).closest("#algolia_box .plp_product_list"))+1)),$(this).closest("#algolia_hits").find(".plp_product_list").length>0&&(prod_position=$($(this).closest("#algolia_hits").find(".plp_product_list")).index($(this).closest(".plp_product_list"))+1)),$("body").hasClass("otc-product-page")){var sectionTitle=$(this).closest("section").attr("data-tracker");null!=sectionTitle&&null!=sectionTitle&&""!=sectionTitle&&(window.nms_tracker=sectionTitle,localStorage.removeItem("nms_product_tracker"),$(this).closest("section").find(".swiper-slide").length>0&&(prod_position=$($(this).closest("section").find(".swiper-slide")).index($(this).closest(".swiper-slide"))+1))}var product_section=$(this).closest("section").attr("data-tracker");if(null!=product_section&&null!=product_section&&""!=product_section){var itemDiv=null;$(this).closest(".pdp_product_list").length>0&&null!=(itemDiv=$(this).closest(".pdp_product_list"))&&null!=itemDiv&&(prod_position=$($(this).closest("section").find(".pdp_product_list")).index($(this).closest(".pdp_product_list"))+1),$(this).closest(".widget_product_list").length>0&&null!=(itemDiv=$(this).closest(".widget_product_list"))&&null!=itemDiv&&(prod_position=$($(this).closest("section").find(".widget_product_list")).index($(this).closest(".widget_product_list"))+1),null!=itemDiv&&null!=itemDiv&&(category=null!=itemDiv.find(".gtmEvents").attr("data-cate")?itemDiv.find(".gtmEvents").attr("data-cate"):"",sub_category=null!=itemDiv.find(".gtmEvents").attr("data-subcate")?itemDiv.find(".gtmEvents").attr("data-subcate"):"",brand=null!=itemDiv.find(".gtmEvents").attr("data-manu")?itemDiv.find(".gtmEvents").attr("data-manu"):"",dimension21=null!=itemDiv.find(".gtmEvents").attr("data-sellername")?itemDiv.find(".gtmEvents").attr("data-sellername"):"",dimension22=null!=itemDiv.find(".gtmEvents").attr("data-3p-available")?itemDiv.find(".gtmEvents").attr("data-3p-available"):"",bannerPromo=!1)}if($("body").hasClass("otc-product-page")){if($(this).closest(".product-footer-wrapper").length>0){var trackTitle=$(this).closest(".product-footer-wrapper").find(".gtmEvents").attr("data-tracker");null!=trackTitle&&null!=trackTitle&&""!=trackTitle&&(window.nms_tracker=trackTitle,localStorage.removeItem("nms_product_tracker")),itemProdDiv=$(this).closest(".product-footer-wrapper"),null!=itemProdDiv&&null!=itemProdDiv&&(category=null!=itemProdDiv.find(".gtmEvents").attr("data-cate")?itemProdDiv.find(".gtmEvents").attr("data-cate"):"",sub_category=null!=itemProdDiv.find(".gtmEvents").attr("data-subcate")?itemProdDiv.find(".gtmEvents").attr("data-subcate"):"",brand=null!=itemProdDiv.find(".gtmEvents").attr("data-manu")?itemProdDiv.find(".gtmEvents").attr("data-manu"):"",dimension21=null!=itemProdDiv.find(".gtmEvents").attr("data-sellername")?itemProdDiv.find(".gtmEvents").attr("data-sellername"):"",dimension22=null!=itemProdDiv.find(".gtmEvents").attr("data-3p-available")?itemProdDiv.find(".gtmEvents").attr("data-3p-available"):"",prod_position=null!=itemProdDiv.find(".gtmEvents").attr("data-position")?itemProdDiv.find(".gtmEvents").attr("data-position"):"")}null!=$(this).closest(".pdp_deals_promo")&&null!=$(this).closest(".pdp_deals_promo").attr("id")&&(bestCart="#"+$(this).closest(".pdp_deals_promo").attr("id"),$(this).closest(bestCart+" .bestdeals_content")&&(category=null!=$(this).closest(".swiper-slide").find(".gtmEvents").attr("data-cate")?$(this).closest(".swiper-slide").find(".gtmEvents").attr("data-cate"):"",sub_category=null!=$(this).closest(".swiper-slide").find(".gtmEvents").attr("data-subcate")?$(this).closest(".swiper-slide").find(".gtmEvents").attr("data-subcate"):"",brand=null!=$(this).closest(".swiper-slide").find(".gtmEvents").attr("data-manu")?$(this).closest(".swiper-slide").find(".gtmEvents").attr("data-manu"):"",dimension21=null!=$(this).closest(".swiper-slide").find(".gtmEvents").attr("data-sellername")?$(this).closest(".swiper-slide").find(".gtmEvents").attr("data-sellername"):"",dimension22=null!=$(this).closest(".swiper-slide").find(".gtmEvents").attr("data-3p-available")?$(this).closest(".swiper-slide").find(".gtmEvents").attr("data-3p-available"):"",bannerPromo=!1,prod_position=$($(this).closest("section").find(".swiper-slide")).index($(this).closest(".swiper-slide"))+1))}if(($("body").hasClass("otc-manu-page")||$("body").hasClass("otc-category-page")||$("body").hasClass("otc-brand-page")||$("body").hasClass("search-result-page"))&&($("#actionField").length>0&&(window.nms_tracker=$("#actionField").val()),$("#topdeal_page").length>0&&$("#curr_cat_name").length>0&&(window.nms_tracker=$("#curr_cat_name").val()),category=null!=$(this).closest(".plp_product_list").find(".gtmEvents").attr("data-cate")?$(this).closest(".plp_product_list").find(".gtmEvents").attr("data-cate"):"",sub_category=null!=$(this).closest(".plp_product_list").find(".gtmEvents").attr("data-subcate")?$(this).closest(".plp_product_list").find(".gtmEvents").attr("data-subcate"):"",brand=null!=$(this).closest(".plp_product_list").find(".gtmEvents").attr("data-manu")?$(this).closest(".plp_product_list").find(".gtmEvents").attr("data-manu"):"",dimension21=null!=$(this).closest(".plp_product_list").find(".gtmEvents").attr("data-sellername")?$(this).closest(".plp_product_list").find(".gtmEvents").attr("data-sellername"):"",dimension22=null!=$(this).closest(".plp_product_list").find(".gtmEvents").attr("data-3p-available")?$(this).closest(".plp_product_list").find(".gtmEvents").attr("data-3p-available"):""),$("body").hasClass("search-result-page")&&(window.nms_tracker="Search Results"),$("body").hasClass("top-deals-list")&&$("#topdeal_page").length>0&&$(".data-tracker").length>0&&(window.nms_tracker=$(".data-tracker").text(),category=null!=$(this).closest(".plp_product_list").find(".gtmEvents").attr("data-cate")?$(this).closest(".plp_product_list").find(".gtmEvents").attr("data-cate"):"",sub_category=null!=$(this).closest(".plp_product_list").find(".gtmEvents").attr("data-subcate")?$(this).closest(".plp_product_list").find(".gtmEvents").attr("data-subcate"):"",brand=null!=$(this).closest(".plp_product_list").find(".gtmEvents").attr("data-manu")?$(this).closest(".plp_product_list").find(".gtmEvents").attr("data-manu"):"",dimension21=null!=$(this).closest(".plp_product_list").find(".gtmEvents").attr("data-sellername")?$(this).closest(".plp_product_list").find(".gtmEvents").attr("data-sellername"):"",dimension22=null!=$(this).closest(".plp_product_list").find(".gtmEvents").attr("data-3p-available")?$(this).closest(".plp_product_list").find(".gtmEvents").attr("data-3p-available"):"",$(this).closest(".top-deals-list").find(".plp_product_list").length>0&&(prod_position=$($(this).closest(".top-deals-list").find(".plp_product_list")).index($(this).closest(".plp_product_list"))+1)),localStorage.getItem("jio_store_id")){localStorage.getItem("jio_pickup_cart_id")||create_universal_cart(!0);var cart_id=localStorage.getItem("jio_pickup_cart_id")}var status=perform_add_to_cart(1,sku,cart_id,0);if(!0===status){var max_allowed,gtmStatus;if(plus_btn.prev().text(current_qty+1),current_qty+1==(max_allowed=plus_btn.attr("data-max"))?(plus_btn.prop("disabled",!1),plus_btn.addClass("disabled")):plus_btn.prop("disabled",!1),localStorage.getItem("jio_ads_clickid")){var click_track=[];localStorage.getItem("jio_ads_conversion")&&(click_track=JSON.parse(localStorage.getItem("jio_ads_conversion")));var click_id=localStorage.getItem("jio_ads_clickid"),found=!1;if(click_track.find((o,i)=>{o.sku===sku&&o.clickid==click_id&&(found=!0)}),0==found&&(click_track.push({sku:sku,clickid:click_id}),localStorage.setItem("jio_ads_conversion",JSON.stringify(click_track)),JioAds)){var click_id=localStorage.getItem("jio_ads_clickid");JioAds.fireConversionApi(click_id,"1"),localStorage.removeItem("jio_ads_clickid")}}if(get_cart_details(!0),"1"==document.getElementById("gtm_status").value){var cartInfo=localStorage.getItem("cart_info");if(localStorage.getItem("jio_store_id"))var cartInfo=localStorage.getItem("pickup_cart_info");if(cartInfo){var cart_products=JSON.parse(cartInfo);if(dataLayer&&cart_products.cart.lines)for(var products=cart_products.cart.lines,i=0;i<products.length;i++)if(products[i].product_code==sku){var prod=products[i],customer={};0!=localStorage.getItem("userid")&&null!=localStorage.getItem("userid")?(customer.isLoggedIn=!0,customer.id=localStorage.getItem("userid"),localStorage.getItem("displayemail")&&(customer.email=$.md5(localStorage.getItem("displayemail"))),localStorage.getItem("new_customer")&&(customer.new_customer=localStorage.getItem("new_customer")),customer.city="NA",localStorage.getItem("nms_mgo_city")&&(customer.city=localStorage.getItem("nms_mgo_city").toUpperCase())):(customer.isLoggedIn=!1,customer.city="NA",localStorage.getItem("nms_mgo_city")&&(customer.city=localStorage.getItem("nms_mgo_city").toUpperCase()));var zipCode="NA";localStorage.getItem("nms_mgo_pincode")&&(zipCode=localStorage.getItem("nms_mgo_pincode"));var main_category="";prod.vertical_code&&(main_category+=ucfirst(prod.vertical_code,!0)),category&&(main_category+="/"+category),sub_category&&(main_category+="/"+sub_category);var prodSku=prod.product_code,dimension19="FALSE",dimension20=null,dimension18=null;let productJson={};var existingDimension21=dimension21,existingDimension22=dimension22;let cartTracker;$.isEmptyObject(window.searchKeyData)?$("body").hasClass("search-result-page")&&$("#search_kwrd").length>0&&$("#search_kwrd").text()&&(dimension20=$("#search_kwrd").text()):$.each(JSON.parse(window.searchKeyData),(function(itemIndex,itemElement){prodSku&&itemIndex==prodSku&&(itemElement.hasOwnProperty("dimension19")&&(dimension19=itemElement.dimension19),itemElement.hasOwnProperty("dimension21")&&(dimension21=itemElement.dimension21),itemElement.hasOwnProperty("dimension22")&&(dimension22=itemElement.dimension22)),itemElement.hasOwnProperty("dimension20")&&(dimension20=itemElement.dimension20),itemElement.hasOwnProperty("dimension18")&&(dimension18=itemElement.dimension18)})),null!=existingDimension21&&(dimension21=existingDimension21),null!=existingDimension22&&(dimension22=existingDimension22),window.nms_tracker&&(dimension18=window.nms_tracker),"undefined"!=typeof journeyDataLayer&&journeyDataLayer(),1==bannerPromo?"undefined"!=typeof bannerPromoTag&&(bannerPromoTag(),null!=window.dimension18&&(dimension18=window.dimension18)):(window.dimension24=null,window.dimension25=null,window.dimension26=null,window.dimension27=null),productJson={name:prod.display_name,id:prod.product_code,price:prod.selling_price,brand:brand,category:main_category,quantity:1,dimension18:dimension18,dimension19:dimension19,dimension20:dimension20,dimension21:"RRL",dimension22:!1,dimension24:window.dimension24,dimension25:window.dimension25,dimension26:window.dimension26,dimension27:window.dimension27},""!=prod_position&&(productJson.position=parseInt(prod_position)),""!=dimension21&&null!=dimension21&&"RIL"!=dimension21&&(productJson.dimension21=dimension21),""!=dimension22&&0!=dimension22&&null!=dimension22&&(productJson.dimension22="string"!=typeof dimension22||"1"!==dimension22||Boolean(parseInt(dimension22))),dataLayer.push({ecommerce:null}),dataLayer.push({event:"ecom_addToCart",add_type:"regular",journey:window.journeyData,ecommerce:{add:{actionField:{list:window.nms_tracker},products:[productJson]}},customer:customer}),cartTracker=null!=localStorage.getItem("nms_promo_cart")&&""!=localStorage.getItem("nms_promo_cart")?JSON.parse(localStorage.getItem("nms_promo_cart")):{},cartTracker[prod.product_code]=productJson,$.isEmptyObject(cartTracker)?localStorage.removeItem("nms_promo_cart"):localStorage.setItem("nms_promo_cart",JSON.stringify(cartTracker))}}}}else{var current_qty,max_allowed;if("INSUFFICIENT_INVENTORY"==status.reason_code)return(current_qty=parseInt(plus_btn.prev().text()))<(max_allowed=plus_btn.attr("data-max"))?notify("You have reached the maximum available quantity","error"):notify("This product currently is out of stock at your pincode","error"),plus_btn.prop("disabled",!1),plus_btn.addClass("disabled"),!1;status.reason_eng?notify(status.reason_eng,"error"):notify("Error occurred. Try again later","error")}return!1})),$(document).on("click",".lockedprodbtn",(function(ev){ev.preventDefault(),"undefined"!=typeof isModalOpen&&(isModalOpen("#jiocashback_dialog","jm-bottomsheet-visible"),onJioPopLoad()),$("#jiocashback_form").length>0&&$("#jiocashback_form")[0].reset(),$(".new_jio").is(":checked")&&$(".jiocashback-submit").attr("disabled",!0)})),$(document).on("click",".buynowbtn",(function(ev){ev.preventDefault(),localStorage.getItem("ChannelID")&&localStorage.removeItem("ChannelID"),$(this).attr("disabled",!0);var add_on_status=$("#add_on_status").val(),jioOffer="false",sku=$(this).attr("data-sku"),lockedProd="";if(null!=(lockedProd=$(this).attr("data-jiolocked"))&&""!=lockedProd&&"true"==lockedProd&&null!=localStorage.getItem("lock_options")){var lock_options=JSON.parse(localStorage.getItem("lock_options"));null!=lock_options.locked_phone&&1==lock_options.locked_phone&&null!=lock_options.customer_type&&null!=lock_options.product_code&&""!=lock_options.product_code&&null!=sku&&""!=sku&&lock_options.product_code==sku.toString()&&(add_on_status=0,jioOffer="true"),localStorage.removeItem("paynowID"),localStorage.removeItem("buy_now_cart_info")}buynowItem(add_on_status,jioOffer,$(this))})),$("#extended_services_form").submit((function(ev){ev.preventDefault();var ext_sku=[],extended_warr;if((extended_warr=$(".ext_warranty_sku:checked").val())&&ext_sku.push(extended_warr),$(".add_on_sku:checked").each((function(){var sku=$(this).val();ext_sku.push(sku)})),ext_sku.length>0){var source=$("#elec_addon_dialog").attr("data-source");if(localStorage.getItem("buynowdata")){var main_sku=localStorage.getItem("buynowdata");ext_sku.unshift(main_sku);var all_sku=ext_sku.join(",");localStorage.setItem("buynowdata",all_sku),window.location.href="/customer/account/login"}else{var main_sku=$("#main_product_id").val(),all_status_arr=[],all_status;if("buynow"==source){var extended_warr=$(".ext_warranty_sku:checked").val(),cart_id=localStorage.getItem("paynowID");if(extended_warr){var status=perform_add_to_cart(1,extended_warr,cart_id,main_sku);all_status_arr.push(status)}$(".add_on_sku:checked").each((function(){var val,status=perform_add_to_cart(1,$(this).val(),cart_id,main_sku);all_status_arr.push(status)}))}else $(ext_sku).each((function(i,val){var status=perform_add_to_cart(1,val,0,main_sku);all_status_arr.push(status)}));1==all_status_arr.every(status=>!0===status)?($("body").removeClass("disable-scroll"),$("#elec_addon_dialog").removeClass("jm-bottomsheet-visible"),"addtocart"==source?(get_cart_details(!0),notify("Added to cart","success")):(get_cart_details(!1),window.location.href="/checkout/review")):($("body").removeClass("disable-scroll"),$("#elec_addon_dialog").removeClass("jm-bottomsheet-visible"),notify("Error Occurred! Try again later","error"))}}})),$(document).on("submit","#elec_promo_addon_dialog .modal-content .promo_extended_services_form",(function(ev){ev.preventDefault();var ext_sku=[],extended_warr=$("#elec_promo_addon_dialog .promo_ext_warranty_sku:checked").val();if(extended_warr&&ext_sku.push(extended_warr),$("#elec_promo_addon_dialog .promo_add_on_sku:checked").each((function(){var sku=$(this).val();ext_sku.push(sku)})),ext_sku.length>0){var source=$("#elec_promo_addon_dialog").attr("data-source"),main_sku=$("#elec_promo_addon_dialog .main_product_id").val(),all_status_arr=[],all_status;$(ext_sku).each((function(i,val){var status=perform_add_to_cart(1,val,0,main_sku);all_status_arr.push(status)})),1==all_status_arr.every(status=>!0===status)?($("#elec_promo_addon_dialog").modal("hide"),"addtocart"==source?(get_cart_details(!0),notify("Added to cart","success")):(get_cart_details(!1),window.location.href="/checkout/review")):($("#elec_promo_addon_dialog").modal("hide"),notify("Error Occurred! Try again later","error"))}})),$(document).on("change",'input:radio[name="new_jio"]',(function(){if($(".jiocashback-submit").prop("disabled",!0),$("#port_number").val(""),$("#exist_number").val(""),$("#port_number").prop("readonly",!0),$("#exist_number").prop("readonly",!0),$(this).is(":checked")){var new_jio=$(this).val(),pNumber="";$("#product_custype").val(null),$("#mnp_source_number").val(null),""!=new_jio&&($("#product_custype").val(new_jio),$("#locked_phone").val("true"),"mnp"==new_jio?($("#port_number").prop("readonly",!1),""!=$("#port_number").val()&&(pNumber=$("#port_number").val())):"existing"==new_jio?($("#exist_number").prop("readonly",!1),""!=$("#exist_number").val()&&(pNumber=$("#exist_number").val())):pNumber=null,""!=pNumber&&null!=pNumber&&$("#mnp_source_number").val(pNumber),$(".jiocashback-submit").prop("disabled",!1))}})),$(document).ready((function(e){if($("body").hasClass("otc-product-page")){$("#jiocashback_form").length>0&&$("#jiocashback_form")[0].reset();var lockedStatus=!1,lock_options=localStorage.getItem("lock_options");if(null!=lock_options){var lockedValues=JSON.parse(lock_options);if(0!=(lockedStatus=$(".buynowbtn").attr("data-jiolocked"))&&"true"==lockedStatus){var prodSku=null!=$(".buynowbtn").attr("data-sku")?$(".buynowbtn").attr("data-sku"):null;null!=lockedValues.product_code&&null!=prodSku&&lockedValues.product_code!=prodSku&&($(".jio-offer-details .jioOff").html(""),$(".jio-offer-details .offer-applied-btn").hide(),$(".cart-action").show(),$(".jio-offer-details .lockedprodbtn").show(),$(".jio-offer-terms-cond").show(),lockedValues="")}else lockedValues="",localStorage.removeItem("lock_options");null!=lockedValues&&""!=lockedValues?1==lockedValues.locked_phone&&($("#product_custype").val(null),$("#locked_phone").val("true"),null!=lockedValues.customer_type&&($(".cart-action").hide(),$(".jio-offer-details .offer-applied-btn").show(),$(".offer-applied-btn .lockedprodbtn").hide(),$(".jio-offer-terms-cond").hide(),"mnp"==lockedValues.customer_type?($("#mnp_number").prop("checked",!0),$("#product_custype").val("mnp"),null!=lockedValues.mnp_source_number&&(""!=lockedValues.mnp_source_number&&null!=lockedValues.mnp_source_number?($("#port_number").val(lockedValues.mnp_source_number),$("#mnp_source_number").val(lockedValues.mnp_source_number),$(".textOffer").text(""),$(".textOffer_mpn").find(".textOffer").text(lockedValues.mnp_source_number),$(".offer-applied-btn .jioOff").html($(".textOffer_mpn").html()).show()):($("#mnp_source_number").val(null),$("#port_number").val("")))):"existing"==lockedValues.customer_type?($("#existing_jio").prop("checked",!0),$("#product_custype").val("existing"),null!=lockedValues.mnp_source_number&&(""!=lockedValues.mnp_source_number&&null!=lockedValues.mnp_source_number?($("#exist_number").val(lockedValues.mnp_source_number),$("#mnp_source_number").val(lockedValues.mnp_source_number),$(".textOffer").text(""),$(".textOffer_existing").find(".textOffer").text(lockedValues.mnp_source_number),$(".offer-applied-btn .jioOff").html($(".textOffer_existing").html()).show()):($("#mnp_source_number").val(null),$("#exist_number").val(""),$(".textOffer").text(""),$(".textOffer_existing").find(".textOffer").text(lockedValues.mnp_source_number),$(".offer-applied-btn .jioOff").html($(".textOffer_existing").html()).show()))):"new"==lockedValues.customer_type&&($("#new_jio").prop("checked",!0),$("#product_custype").val("new"),$(".offer-applied-btn .jioOff").html($(".textOffer_new").html()).show()))):($(".jio-offer-details .jioOff").html(""),$(".jio-offer-details .offer-applied-btn").hide(),$(".cart-action").show(),$(".jio-offer-details .lockedprodbtn").show(),$(".jio-offer-terms-cond").show())}else $(".jio-offer-details .lockedprodbtn").show(),$(".jio-offer-terms-cond").show(),$(".cart-action").show(),$(".jio-offer-details .offer-applied-btn").hide();$("#jiocashback_form").length>0&&$("#jiocashback_form")[0].reset();var newJio="",jioOffer;"true"==(null!=$(".buynowbtn").attr("data-jiolocked")?$(".buynowbtn").attr("data-jiolocked"):"false")&&($(".jiocashback-submit").prop("disabled",!0),""!=(newJio=$('input:radio[name="new_jio"]:checked').val())&&$(".jiocashback-submit").prop("disabled",!1),$("#jiocashback_form").validate({ignoreTitle:!0,errorElement:"div",errorClass:"form_error field-error",rules:{exist_number:{Validationmobile:$("#exist_number").val()},port_number:{required:"#mnp_number:checked",mobileValidation:$("#port_number").val()}},messages:{port_number:{required:"Please enter non-jio mobile number"}}}),$.validator.addMethod("mobileValidation",(function(value,element){return!(value.length>0)||!!/^\d{10}$/.test(value)}),"Please enter valid mobile number"),$.validator.addMethod("Validationmobile",(function(value,element){return!(value.length>0)||!!/^\d{10}$/.test(value)}),"Please enter valid mobile number"),$(".jiocashback-submit").click((function(ev){ev.preventDefault(),$("#jiocashback_form").submit()})),$("#jiocashback_form").submit((function(e){if(e.preventDefault(),$(".number_error").text(""),$(".jio-offer-details .lockedprodbtn").show(),$(".jio-offer-terms-cond").show(),$(".jio-offer-details .offer-applied-btn").hide(),$(".offer-applied-btn .jioOff").html(""),$(this).valid()){$(".jiocashback-submit").attr("disabled",!0);var locked_status=null!=$("#locked_phone").val()?$("#locked_phone").val():"",customerType=null!=$("#product_custype").val()?$("#product_custype").val():"",newJio=$('input:radio[name="new_jio"]:checked').val(),pNumber="";""!=newJio&&("mnp"==newJio?""!=$("#port_number").val()&&(pNumber=$("#port_number").val(),$(".jio-offer-details .lockedprodbtn").hide(),$(".jio-offer-terms-cond").hide(),$(".jio-offer-details .offer-applied-btn").show(),$(".textOffer").text(""),$(".textOffer_mpn").find(".textOffer").text(pNumber),$(".offer-applied-btn .jioOff").html($(".textOffer_mpn").html()).show()):"existing"==newJio?""!=$("#exist_number").val()?(pNumber=$("#exist_number").val(),$(".jio-offer-details .lockedprodbtn").hide(),$(".jio-offer-terms-cond").hide(),$(".jio-offer-details .offer-applied-btn").show(),$(".textOffer").text(""),$(".textOffer_existing").find(".textOffer").text(pNumber),$(".offer-applied-btn .jioOff").html($(".textOffer_existing").html()).show()):($(".jio-offer-details .lockedprodbtn").hide(),$(".jio-offer-terms-cond").hide(),$(".jio-offer-details .offer-applied-btn").show(),$(".textOffer").text(""),$(".offer-applied-btn .jioOff").html($(".textOffer_existing").html()).show()):"new"==newJio?(pNumber=null,$(".jio-offer-details .lockedprodbtn").hide(),$(".jio-offer-terms-cond").hide(),$(".jio-offer-details .offer-applied-btn").show(),$(".offer-applied-btn .jioOff").html($(".textOffer_new").html()).show()):pNumber=null,""!=pNumber&&null!=pNumber&&$("#mnp_source_number").val(pNumber));var mpn_number=null!=$("#mnp_source_number").val()?$("#mnp_source_number").val():null,add_on_status=0,jioOffer="true";if(""!=customerType&&""!=locked_status){localStorage.removeItem("lock_options"),$(".jio-offer-details .offer-applied-btn").show(),$(".cart-action").hide();var offer_obj={};offer_obj.locked_phone="true"==locked_status,offer_obj.customer_type=customerType,offer_obj.mnp_source_number=null!=mpn_number?mpn_number:null,$(".buynowbtn").length>0&&(offer_obj.product_code=$(".buynowbtn").attr("data-sku")),offer_obj&&Object.keys(offer_obj).length>0&&localStorage.setItem("lock_options",JSON.stringify(offer_obj)),$("#jiocashback_dialog .close").trigger("click")}}})))}})),$(document).on("keypress keyup change","#exist_number",(function(){$(".jiocashback-submit").prop("disabled",!1),0==$(this).val().indexOf("0")&&$(this).val($(this).val().substring(1))})),$(document).on("keyup","#exist_number",(function(){this.value=this.value.replace(/[^0-9\.]/g,"")})),$(document).on("keypress keyup change","#port_number",(function(){$(".jiocashback-submit").prop("disabled",!1),0==$(this).val().indexOf("0")&&$(this).val($(this).val().substring(1))})),$(document).on("keyup","#port_number",(function(){this.value=this.value.replace(/[^0-9\.]/g,"")})),$(document).on("click",".jiocashback-skip",(function(e){var add_on_status=0,jioOffer="true";$(this).attr("disabled",!1);var lock_options=localStorage.getItem("lock_options");null!=lock_options&&""!=lock_options||$("#jiocashback_form")[0].reset(),"undefined"!=typeof isModalClose&&(isModalClose("#jiocashback_dialog","jm-bottomsheet-visible"),onJioPopClose())})),$(document).on("click","#jiocashback_dialog .close",(function(e){"undefined"!=typeof isModalClose&&isModalClose("#jiocashback_dialog","jm-bottomsheet-visible"),onJioPopClose(),$("#jiocashback_form").length>0&&$("#jiocashback_form")[0].reset(),$(".jiocashback-submit").prop("disabled",!0)})),$(document).on("click",".jio-offer-remove",(function(e){var lock_options,lockedValues="";null!=localStorage.getItem("lock_options")&&localStorage.removeItem("lock_options"),$(".jio-offer-details .jioOff").html(""),$("#jiocashback_form").length>0&&$("#jiocashback_form")[0].reset(),$(".jio-offer-details .offer-applied-btn").hide(),$(".cart-action").show(),$(".jio-offer-details .lockedprodbtn").show(),$(".jio-offer-terms-cond").show()})),$(document).on("change","#locked_offer_terms",(function(){var checked;$(this).is(":checked")?($(".lockedprodbtn").prop("disabled",!1),$(".lockedprodbtn").removeClass("disabled")):($(".lockedprodbtn").prop("disabled",!0),$(".lockedprodbtn").addClass("disabled"))})),$(document).on("click","#doorstep_eligibility",(function(){let userid=localStorage.getItem("userid"),authtoken=localStorage.getItem("authtoken"),selling_price=parseFloat($("#selling_price_val").val());if(authtoken&&userid&&"0"!=userid)$.ajax({url:"/hcat/rest/v1/5g/checkeligible",headers:{userid:userid,authtoken:authtoken},method:"POST",dataType:"JSON",contentType:"application/json",data:JSON.stringify({amount:selling_price}),success:function(resp){if(resp.status)if("fail"==resp.status&&"01"==resp.errCode){notify("Oops, this number is not pre-approved for credit.");var dsf_today=new Date;dsf_today.setMonth(dsf_today.getMonth()+3),localStorage.setItem("dsf_eligibility",dsf_today),$("#doorstep_eligibility").prop("disabled",!1)}else if("success"==resp.status){let checked,sku,obj={sim_needed:$("#5g_sim_required").prop("checked"),dsf_needed:!0},obj_str='{"'+$("#product_id").val()+'":'+JSON.stringify(obj)+"}";localStorage.setItem("5g_phone_info",obj_str),$(".buynowbtn").trigger("click")}},error:function(){}});else{var url,path=(new Url).path;localStorage.setItem("redirectUrl",path),window.location.href="/customer/account/login"}}));