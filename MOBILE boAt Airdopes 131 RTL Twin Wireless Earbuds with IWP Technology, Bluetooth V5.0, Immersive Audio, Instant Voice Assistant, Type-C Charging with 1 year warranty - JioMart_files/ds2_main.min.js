function apply_wishlist(sku){if(localStorage.getItem("jio_wishlist_sku")){let wishlist_sku=localStorage.getItem("jio_wishlist_sku").split(",");if(wishlist_sku.length>0)if(""!=sku){let found;-1===wishlist_sku.indexOf(sku)?$(".wishlist_btn[data-sku='"+sku+"']").removeClass("selected"):$(".wishlist_btn[data-sku='"+sku+"']").addClass("selected")}else wishlist_sku.map(sku=>{$(".wishlist_btn[data-sku='"+sku+"']").addClass("selected")})}else $(".wishlist_btn").removeClass("selected")}function call_wishlist_api(action,sku,show_toast){var userid=localStorage.getItem("userid"),authtoken=localStorage.getItem("authtoken"),pin=localStorage.getItem("nms_mgo_pincode"),ajax_data={action:action,pin:pin,source:"web"};"Add"!=action&&"Remove"!=action||(ajax_data.productCode=sku),$.ajax({url:window.wishlist_api,method:"POST",crossDomain:!0,headers:{authtoken:authtoken,userid:userid},data:ajax_data,dataType:"JSON",success:function(resp){if("success"==resp.status){if(resp.result.productList)if(resp.result.productList.length>0){var result=resp.result.productList,wishlist_sku=[];for(i=0;i<result.length;i++)wishlist_sku.push(result[i].skuCode);localStorage.setItem("jio_wishlist_sku",wishlist_sku)}else localStorage.removeItem("jio_wishlist_sku");apply_wishlist(sku),"Add"==action?"Added Successfully."==resp.result.message?!0===show_toast&&notify("Added to Wishlist","success","/customer/wishlist"):notify(resp.result.message,"error"):"Remove"==action&&!0===show_toast&&notify("Removed from Wishlist","error")}else"Fetch"!=action&&notify("Error in wislist operation","error")},error:function(xhr,status,error){if("Fetch"!=action){let resp=xhr.responseJSON;if(resp&&resp.status&&"fail"==resp.status&&resp.reason&&"UNAUTHORIZED"==resp.reason.reason_code){let url=new Url,path=url.path,query=url.query;query&&(path=path+"?"+query),path&&localStorage.setItem("redirectUrl",path),window.location.href="/customer/account/login"}else notify("Error occurred!","error")}}})}function storeRecentSearch(searchTerm){var recentSearches=JSON.parse(localStorage.getItem("nms_alg_rec_searches"));null==recentSearches&&(recentSearches=[]),searchTerm=$.trim(searchTerm),recentSearches.length>0&&$.each(recentSearches,(function(index,val){searchTerm==val&&recentSearches.splice(index,1),index>=10&&recentSearches.splice(index,1)})),recentSearches.unshift(searchTerm),localStorage.setItem("nms_alg_rec_searches",JSON.stringify(recentSearches))}async function get_all_tree_json(){let pincode=window.default_pin;localStorage.getItem("nms_mgo_pincode")&&(pincode=localStorage.getItem("nms_mgo_pincode"));let source=window.navigation.source,ajax_data={},res=!1,treejson_url="/catalog/tree_json_plp/"+source;return $.ajax({url:treejson_url,method:"GET",headers:{pin:pincode},data:ajax_data,dataType:"JSON",success:function(resp){localStorage.setItem("jio_category_tree",JSON.stringify(resp)),res=!0},error:function(){}}),await Promise.resolve(res)}$(document).ready((function(){localStorage.getItem("userid")&&"0"!=localStorage.getItem("userid")&&(localStorage.getItem("jio_wishlist_sku")?apply_wishlist(""):call_wishlist_api("Fetch",""))})),$(document).on("click","#btn_ham_menu",(function(){$("#hamburger_menu").css("display","block")})),$(document).on("click","#ham_close",(function(){$("#hamburger_menu").css("display","none")})),$(document).on("click","#btn_minicart",(function(){window.location.href="/checkout/cart"})),$(document).on("click","#btn_search_list",(function(){$("#search_by_list").addClass("jm-bottomsheet-visible"),$("body").addClass("disable-scroll"),setTimeout(()=>{$("#rel_search_val").focus()},50)})),$(document).on("click","#shopping_list_close",(function(){$("#search_by_list").removeClass("jm-bottomsheet-visible"),$("body").removeClass("disable-scroll")})),$(document).on("blur",".input-component",(function(){let val;""!=$(this).val()?$(this).next().addClass("focused"):$(this).next().removeClass("focused")})),$(document).on("input",".input-component",(function(){let val;""!=$(this).val()&&$(this).parent().removeClass("error error-input-anim")})),$(document).on("click",".wishlist_btn",(function(ev){if(ev.stopPropagation(),localStorage.getItem("userid")&&"0"!=localStorage.getItem("userid")){let sku=$(this).attr("data-sku"),show_toast=!0;if($(this).attr("data-showtoast")&&"no"==$(this).attr("data-showtoast")&&(show_toast=!1),localStorage.getItem("jio_wishlist_sku")){let wishlist_sku,found;call_wishlist_api(-1===localStorage.getItem("jio_wishlist_sku").split(",").indexOf(sku)?"Add":"Remove",sku,show_toast)}else call_wishlist_api("Add",sku,show_toast)}else{var url=new Url,path=url.path,query=url.query;query&&(path=path+"?"+query),path&&localStorage.setItem("redirectUrl",path),window.location.href="/customer/account/login"}return!1})),$(window).on("load",(function(){localStorage.getItem("jio_category_tree")||get_all_tree_json()})),$(document).on("click",".jm-bottomsheet",(function(ev){ev.target==this&&($(this).removeClass("jm-bottomsheet-visible"),$("body").removeClass("disable-scroll jm-modal-open"))}));let msite_lastScrollTop=0;function checkShoppingValue(show_effect){if(localStorage.getItem("userid")&&"0"!=localStorage.getItem("userid")){let cart_info=localStorage.getItem("cart_info");cart_info=JSON.parse(cart_info);let class_name="";$("body").hasClass("catalog-product-view")&&(class_name="free_delivery_pdp");let ship_status=0,total_amount=0,cart_lines=0,show_message=0;if(cart_info&&cart_info.cart){let cart_data=cart_info.cart;cart_lines=cart_data.lines.length;let shipping_charges_final=0,shipping_free_threshold=250;cart_data.shipping_charges_final&&(shipping_charges_final=cart_data.shipping_charges_final),cart_data.shipping_free_threshold&&(shipping_free_threshold=cart_data.shipping_free_threshold);let sub_total=parseFloat(cart_data.sub_total),savings=parseFloat(cart_data.total_savings);total_amount=parseFloat(sub_total-savings),cart_data.lines.length>0&&0==shipping_charges_final&&total_amount>=shipping_free_threshold&&(ship_status=1),cart_data.lines.length>0&&0==shipping_charges_final&&total_amount>=shipping_free_threshold&&(show_message=1),cart_data.lines.length>0&&0!=shipping_charges_final&&(show_message=1)}show_message?1==ship_status?($(".deliveryfee-container-success").hasClass("free_delivery_success")&&(show_effect=!1),$(".deliveryfee-container").hide(),$(".deliveryfee-container-success").addClass(class_name+" free_delivery_success").show(),show_effect&&$(".deliveryfee-container-success").length>0&&apply_success_animation()):($(".deliveryfee-container").show(),$(".deliveryfee-container-success").removeClass("free_delivery_success").hide(),$("#delivery_total_cost").html(`&#8377;${total_amount.toFixed(2)}`)):($(".deliveryfee-container").hide(),$(".deliveryfee-container-success").hide())}}function random(max){return Math.random()*(max-0)+0}$(window).scroll((function(event){if($("#bnb_footer").length>0){let scroll_top=$(this).scrollTop(),all_height;$(window).scrollTop()+window.innerHeight+100>=$(document).height()?($("#bnb_footer").show(),$("body").removeClass("bnb_hidden").addClass("bnb_visible")):$(window).scrollTop()+window.innerHeight==$(document).height()?($("#bnb_footer").hide(),$("body").removeClass("bnb_visible").addClass("bnb_hidden")):scroll_top>msite_lastScrollTop?($("#bnb_footer").hide(),$("body").removeClass("bnb_visible").addClass("bnb_hidden")):($("#bnb_footer").show(),$("body").removeClass("bnb_hidden").addClass("bnb_visible")),msite_lastScrollTop=scroll_top}}));let animation_bodymoving=null;function apply_success_animation(){null==animation_bodymoving&&(animation_bodymoving=bodymovin.loadAnimation({container:document.getElementById("anim_container"),path:"/assets/global/anim2.json",renderer:"svg",loop:!1,autoplay:!1,name:"Crafatti Animation",rendererSettings:{progressiveLoad:!1,hideOnTransparent:!1}}),animation_bodymoving.addEventListener("enterFrame",()=>{$(".animation-holder").show()}),animation_bodymoving.addEventListener("complete",()=>{$(".animation-holder").hide()})),animation_bodymoving.setSpeed(.5),animation_bodymoving.playSegments([0,100],!0)}function check_customer_order(){let api_base_url=$("#mst_api_cart_pin_baseurl").val();$.ajax({url:api_base_url+"cart/free_shipping_info",data:{},headers:{userid:localStorage.getItem("userid"),authtoken:localStorage.getItem("authtoken")},async:!1,dataType:"JSON",success:function(resp){if(resp&&resp.result&&resp.result.free_shipping_info){let ship_info=resp.result.free_shipping_info,current=new Date;current.setMinutes(current.getMinutes()+5),localStorage.setItem("jio_order_count_expiry",current),localStorage.setItem("jio_order_count",JSON.stringify(ship_info))}},error:function(){}})}