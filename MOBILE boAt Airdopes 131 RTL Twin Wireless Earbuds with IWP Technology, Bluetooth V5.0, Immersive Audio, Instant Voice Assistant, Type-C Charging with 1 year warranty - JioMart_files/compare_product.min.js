function uniqueValue(arr){for(var a=[],i=0,l=arr.length;i<l;i++)-1===a.indexOf(arr[i])&&""!==arr[i]&&a.push(arr[i]);return a}function RemoveNode(data,id){return!!data&&data.filter((function(emp){return emp.id!=id}))}$(document).on("click",".remove_btn",(function(e){var remove_code=$(this).attr("data-id"),compare_category=$(this).attr("data-category"),compareData=localStorage.getItem("compareData"),sameCategory=!1,exist_compare=[],overall_products="",overall_category=[],product_count=0,new_overall_products="",new_overall_category=[],new_product_count=0,newalreadyExists=!1;if(null!=compareData&&""!=compareData){exist_compare=JSON.parse(compareData);var newObject={id:remove_code,category:compare_category},compare_products=JSON.parse(compareData);if((product_count=compare_products.length)>0)for(var i=0;i<compare_products.length;i++)compare_products[i]&&(compare_products[i].id&&compare_products[i].category&&compare_products[i].id==remove_code&&compare_products[i].category==compare_category&&(already_exists=!0),compare_products[i].category==compare_category&&(sameCategory=!0),null!=compare_products[i].id&&""!=compare_products[i].id&&(overall_products+=0==i?compare_products[i].id:","+compare_products[i].id),null!=compare_products[i].category&&""!=compare_products[i].category&&(overall_category[i]=compare_products[i].category))}if(newObject&&exist_compare&&remove_code){var newcompareData=RemoveNode(exist_compare,remove_code);0==newcompareData.length?localStorage.removeItem("compareData"):localStorage.setItem("compareData",JSON.stringify(newcompareData))}var newRequestCompare=localStorage.getItem("compareData");if(null!=newRequestCompare&&""!=newRequestCompare){var newCompareProduct=JSON.parse(newRequestCompare);if(new_product_count=newCompareProduct.length,newCompareProduct.length>0)for(var i=0;i<newCompareProduct.length;i++)if(newCompareProduct[i]){if(null!=newCompareProduct[i].id&&""!=newCompareProduct[i].id&&(new_overall_products+=0==i?newCompareProduct[i].id:","+newCompareProduct[i].id,$("body").hasClass("catalog-product-view"))){var productCompare=$("#compare_this").attr("data-product");null!=productCompare&&""!=productCompare&&newCompareProduct[i].id==productCompare&&(newalreadyExists=!0)}null!=newCompareProduct[i].category&&""!=newCompareProduct[i].category&&(new_overall_category[i]=newCompareProduct[i].category)}}else location.reload();if(1==newalreadyExists?$("body").hasClass("catalog-product-view")&&($("#compare_prod_btn").hasClass("active")||($("#compare_prod_btn").addClass("active"),$("#compare_prod_btn .iconText").text("Go to Compare"))):$("body").hasClass("catalog-product-view")&&($("#compare_prod_btn").hasClass("active")&&$("#compare_prod_btn").removeClass("active"),$("#compare_prod_btn .iconText").text("Add to Compare")),CompareExists(),""!=new_overall_products){if(new_overall_category){var unique_overall_category=uniqueValue(new_overall_category);if(1==unique_overall_category.length&&unique_overall_category[0]){var dataURL=window.location.origin+"/compare/"+unique_overall_category[0]+"/?ids="+new_overall_products;$("#compare_popup").load(dataURL,(function(){isModalOpen("#compare_products_popup","jm-page-bottomsheet-visible")}))}}}else location.reload()})),$(document).ready((function(e){$(".compare_now").prop("disabled",!0);var compare_this=$("#compare_this").attr("data-product"),already_exists=!1,compare_category=$("#compare_this").attr("data-category"),compareData=localStorage.getItem("compareData");if(""!=compare_this&&""!=compare_category&&null!=compareData&&""!=compareData){var compare_products=JSON.parse(compareData);if(compare_products.length>0)for(var i=0;i<compare_products.length;i++)compare_products[i].id==compare_this&&compare_products[i].category==compare_category&&(already_exists=!0);compare_products.length>2&&localStorage.removeItem("compareData")}1==already_exists?($("#compare_prod_btn").addClass("active"),$("#compare_prod_btn .iconText").text("Go to Compare")):($("#compare_prod_btn").hasClass("active")&&$("#compare_prod_btn").removeClass("active"),$("#compare_prod_btn .iconText").text("Add to Compare")),CompareExists(),$("#compare_prod_btn").on("click",(function(){$(".compare_now").prop("disabled",!0),$(".your_choice").addClass("inactive");var compare_this=$("#compare_this").attr("data-product"),compare_category=$("#compare_this").attr("data-category"),sameCategory=!1,compareData=localStorage.getItem("compareData"),exist_compare=[],overall_products="",overall_category=[],product_count=0;null!=compareData&&""!=compareData&&(exist_compare=JSON.parse(compareData));var already_exists=!1;if($(".primary_header").css({display:"flex"}),$(".selected_container").css({display:"none"}),null!=compare_this&&null!=compare_category&&""!=compare_this&&""!=compare_category){var newObject={id:compare_this,category:compare_category},compare_products;if(null!=compareData&&""!=compareData)if(product_count=(compare_products=JSON.parse(compareData)).length,compare_products.length>0)for(var i=0;i<compare_products.length;i++)compare_products[i]&&(compare_products[i].id&&compare_products[i].category&&compare_products[i].id==compare_this&&compare_products[i].category==compare_category&&(already_exists=!0),compare_products[i].category==compare_category&&(sameCategory=!0))}if(product_count>0&&0==sameCategory)return localStorage.removeItem("compareData"),$("#compare_prod_btn").trigger("click"),!1;if(0==already_exists&&$(this).hasClass("active")&&product_count>=1)return $("#compare_prod_btn .iconText").text("Add to Compare"),$("#compare_prod_btn").hasClass("active")&&$("#compare_prod_btn").removeClass("active"),CompareError("<p>Only two products can be compared at a time. Please select any 2 products from the list to continue.</p>",compare_this),!1;if($(this).hasClass("active")){var newDataCompare=localStorage.getItem("compareData"),overall_category;if(null!=compare_this&&null!=compare_category&&""!=compare_this&&""!=compare_category){var newObject={id:compare_this,category:compare_category},compare_products;if(null!=newDataCompare&&""!=newDataCompare)if(product_count=(compare_products=JSON.parse(newDataCompare)).length,compare_products.length>0)for(var i=0;i<compare_products.length;i++)compare_products[i]&&(null!=compare_products[i].id&&""!=compare_products[i].id&&(overall_products+=0==i?compare_products[i].id:","+compare_products[i].id),null!=compare_products[i].category&&""!=compare_products[i].category&&(overall_category[i]=compare_products[i].category))}if(""!=overall_products)if(overall_category)if(1==(overall_category=uniqueValue(overall_category)).length&&overall_category[0]){var dataURL=window.location.origin+"/compare/"+overall_category[0]+"/?ids="+overall_products;$("#compare_popup").load(dataURL,(function(){isModalOpen("#compare_products_popup","jm-page-bottomsheet-visible")}))}}else if(product_count>=2)return $("#compare_prod_btn").hasClass("active")&&$("#compare_prod_btn").removeClass("active"),CompareError("<p>Only two products can be compared at a time. Please select any 2 products from the list to continue.</p>",compare_this),!1;0==already_exists&&($(this).hasClass("active")?($("#compare_prod_btn .iconText").text("Add to Compare"),$("#compare_prod_btn").hasClass("active")&&$("#compare_prod_btn").removeClass("active")):newObject&&exist_compare&&(exist_compare.push(newObject),localStorage.setItem("compareData",JSON.stringify(exist_compare)),$("#compare_prod_btn .iconText").text("Go to Compare"),$(this).addClass("active"),notify("Added to Compare","success"))),CompareExists()}))})),$(document).on("click",".request_check",(function(){$(".compare_now").prop("disabled",!1);var collectedProducts=$(".request_check:checked").length;if(collectedProducts>2)return!1;if($(this).is(":checked")&&null!=$(this).closest(".showedProducts").find(".addedProducts .product_selection_section")&&null!=$(this).closest(".showedProducts").find(".addedProducts .product_selection_section")){var newNode=$(this).closest(".showedProducts").find(".addedProducts .product_selection_section").clone().removeClass("inactive");null!=newNode&&null!=newNode&&($(this).closest(".showedProducts").addClass("inactive"),$(".secondory_product_selected").append(newNode),$(".primary_header").css({display:"none"}),$(".selected_container").css({display:"block"}),$(".your_choice").removeClass("inactive"))}2==collectedProducts&&($(".your_choice, .select-disable").removeClass("inactive"),$(".selected_container").css({display:"none"}),$(".modalContent .showedProducts").addClass("select-disable"))})),$(document).on("click",".removeCompare",(function(e){var overall_category=[],compareData=localStorage.getItem("compareData");null!=compareData&&""!=compareData&&($("input:checkbox[class=request_check]:checked").each((function(index,elem){var value="",productDiv=$(elem).attr("data-class");if($("."+productDiv).remove(),""!=(value=$(elem).attr("value"))&&null!=value){var newcompareData=RemoveNode(JSON.parse(compareData),value);newcompareData.length>0?localStorage.setItem("compareData",JSON.stringify(newcompareData)):localStorage.removeItem("compareData"),$('.compare_this[data-product="'+value+'"]').prop("checked",!1)}})),0==$(".compare_request .product-details").length&&(localStorage.removeItem("compareData"),$("#newcompare_request .modalContent").html(""),$("#newcompare_request .modalContent").html("<p>No Products Available For Compare</p>")));var Comparecount=localStorage.getItem("compareData");if(null!=Comparecount&&""!=Comparecount){var dataCount=JSON.parse(Comparecount);dataCount.length>0?$("#compare_prod_btn .added_pdp_count").html(dataCount.length).show():$("#compare_prod_btn .product_compare_added").hide()}else $("#compare_prod_btn .added_pdp_count").html("").hide(),$("#compare_prod_btn .product_compare_added").hide()})),$(document).on("click",".compare_now",(function(e){if(!($("input:checkbox[class=request_check]:checked").length>0&&$("input:checkbox[class=request_check]:checked").length<3))return!1;$(".secondory_product_selected").html(""),isModalClose("#newcompare_request","jm-bottomsheet-visible");var compareData=localStorage.getItem("compareData"),sameCategory=!1,product_count=0,overall_products="",overall_category=[],newalreadyExists=!1;null!=compareData&&""!=compareData&&$("input:checkbox[class=request_check]").each((function(index,elem){var value="",compare_this=$(elem).attr("value"),compare_category=$(elem).attr("data-cateid"),productDiv=$(elem).attr("data-class"),already_exists=!1;if($(elem).is(":checked")){var exist_compare=[];if(null!=compare_this&&null!=compare_category&&""!=compare_this&&""!=compare_category){var newObject={id:compare_this,category:compare_category};if(null!=compareData&&""!=compareData){var compare_products=JSON.parse(compareData);if(product_count=compare_products.length,compare_products.length>0)for(var i=0;i<compare_products.length;i++)compare_products[i]&&compare_products[i].id&&compare_products[i].category&&compare_products[i].id==compare_this&&compare_products[i].category==compare_category&&(already_exists=!0)}}product_count<3&&0==already_exists&&(exist_compare=JSON.parse(localStorage.getItem("compareData")),newObject&&exist_compare&&(exist_compare.push(newObject),localStorage.setItem("compareData",JSON.stringify(exist_compare))))}else if(""!=compare_this&&null!=compare_this){var exist_compare=[],newData=RemoveNode(exist_compare=JSON.parse(localStorage.getItem("compareData")),compare_this);localStorage.setItem("compareData",JSON.stringify(newData))}}));var newDataCompare=localStorage.getItem("compareData"),overall_category;if(null!=newDataCompare&&""!=newDataCompare){var compare_products=JSON.parse(newDataCompare);if(product_count=compare_products.length,compare_products.length>0)for(var i=0;i<compare_products.length;i++)if(compare_products[i]){if(null!=compare_products[i].id&&""!=compare_products[i].id&&(overall_products+=0==i?compare_products[i].id:","+compare_products[i].id,$("body").hasClass("catalog-product-view"))){var productCompare=$("#compare_this").attr("data-product");null!=productCompare&&""!=productCompare&&compare_products[i].id==productCompare&&(newalreadyExists=!0)}null!=compare_products[i].category&&""!=compare_products[i].category&&(overall_category[i]=compare_products[i].category)}}if((CompareExists(),""!=overall_products)&&(overall_category&&1==(overall_category=uniqueValue(overall_category)).length&&overall_category[0])){var dataURL=window.location.origin+"/compare/"+overall_category[0]+"/?ids="+overall_products;$("#compare_popup").load(dataURL,(function(){isModalOpen("#compare_products_popup","jm-page-bottomsheet-visible")}))}}));var scrollTopPosition=0,lastKnownScrollTopPosition=0;function CompareError(error,product=""){var compareData=localStorage.getItem("compareData"),getproducts="";null!=compareData&&""!=compareData&&null!=(getproducts=productFetch(compareData))&&""!=getproducts&&$.ajax({url:window.location.origin+"/catalog/compare/request",type:"GET",dataType:"HTML",headers:{error:error},data:{ids:getproducts,product:product},success:function(response){null!=response&&($("#newcompare_request .modalContent").html(""),$("#newcompare_request .modalContent").html(response),$(".secondory_product_selected").html(""),isModalOpen("#newcompare_request","jm-bottomsheet-visible"))},error:function(error){$("#newcompare_request .modalContent").html(""),$("#newcompare_request .modalContent").html("<p>No Products Available For Compare</p>")}})}function productFetch(data){var newdata="",compareData;data&&JSON.parse(data).filter((function(emp){""!=emp.id&&(newdata+=""==newdata?emp.id:","+emp.id)}));return""!=newdata?newdata:null}function CompareExists(){var compare_this=$("#compare_this").attr("data-product"),already_exists=!1,compare_category=$("#compare_this").attr("data-category"),compareData=localStorage.getItem("compareData"),compareLength=0;if(""!=compare_this&&""!=compare_category&&null!=compareData&&""!=compareData){var compare_products=JSON.parse(compareData);if((compareLength=compare_products.length)>0)for(var i=0;i<compare_products.length;i++)compare_products[i].id==compare_this&&compare_products[i].category==compare_category&&(already_exists=!0)}1==already_exists?(compareLength>1?($(".added_pdp_count").html("+ "+(compareLength-1)+" more").show(),$(".product_compare_added").show()):($(".added_pdp_count").html("").hide(),$(".product_compare_added").show()),$(".add_icon").hide(),$(".go_icon").show(),$("#compare_prod_btn").addClass("active"),$("#compare_prod_btn .iconText").text("Go to Compare")):(compareLength>0?($(".added_pdp_count").html(compareLength+" already added</span>").show(),$(".product_compare_added").hide()):$(".product_compare_added").hide(),$(".go_icon").hide(),$(".add_icon").show(),$("#compare_prod_btn").hasClass("active")&&$("#compare_prod_btn").removeClass("active"),$("#compare_prod_btn .iconText").text("Add to Compare"))}$(document).ready((function(){navigator.userAgent.match(/iPhone|iPad|iPod/i)&&($("body").addClass("platform-ios"),$(window).scroll((function(){scrollTopPosition=$(document).scrollTop()})),$(".modal").on("show.bs.modal",(function(){$("body").css("top",-1*scrollTopPosition),lastKnownScrollTopPosition=scrollTopPosition})),$(".modal").on("hidden.bs.modal",(function(){$("body").scrollTop(lastKnownScrollTopPosition)})))})),$(document).on("click",".clearCompare",(function(){var compareData=localStorage.getItem("compareData");null!=compareData&&""!=compareData&&(localStorage.removeItem("compareData"),$(".nmsalert").length>0&&$(".close.btcls").trigger("click"),$("#compare_this").prop("checked",!1))})),$(document).on("click","#compare_products_popup .close",(function(){$("#compare_popup").text("")})),$(document).on("click",".compare_add_btn",(function(){$("#compare_prod_btn").trigger("click")})),$(document).on("click tap",".compare_request_close",(function(e){$(".secondory_product_selected").html(""),$(".your_choice, .select-disable").addClass("inactive"),$(".selected_container").css({display:"none"}),isModalClose("#newcompare_request","jm-bottomsheet-visible")})),$(document).on("click tap",".compare_close",(function(e){isModalClose("#compare_products_popup","jm-page-bottomsheet-visible")})),$(document).on("click tap",".product-model",(function(e){e.preventDefault();var productValue=$(this).attr("data-id"),productSelected=$(this).attr("data-name");if($(".selected_product").text("Select Model"),null!=productValue&&null!=productValue&&""!=productValue){$(".selected_product").text(productSelected);var compare_category=$("#compare_category").val(),sameCategory=!1,compareData=localStorage.getItem("compareData"),exist_compare=[],overall_products="",overall_category=[],product_count=0,newalreadyExists=!1;null!=compareData&&""!=compareData&&(exist_compare=JSON.parse(compareData));var already_exists=!1;if(null!=productValue&&null!=compare_category&&""!=productValue&&""!=compare_category){var newObject={id:productValue,category:compare_category},compare_products;if(null!=compareData&&""!=compareData)if(product_count=(compare_products=JSON.parse(compareData)).length,compare_products.length>0)for(var i=0;i<compare_products.length;i++)compare_products[i]&&(compare_products[i].id&&compare_products[i].category&&compare_products[i].id==productValue&&compare_products[i].category==compare_category&&(already_exists=!0),compare_products[i].category==compare_category&&(sameCategory=!0));if(product_count>2&&null!=exist_compare&&""!=exist_compare){var all_products=NewproductFetch(exist_compare),all_category=categoryFetch(exist_compare),dataURL=window.location.origin+"/compare/"+all_category+"/?ids="+all_products;return notify("Already 2 Products Added To Compare","danger"),window.location.href=dataURL,!1}0==already_exists&&newObject&&exist_compare&&(exist_compare.push(newObject),localStorage.setItem("compareData",JSON.stringify(exist_compare)),notify("Added to Compare","success"))}var newDataCompare=localStorage.getItem("compareData"),overall_category;if(null!=productValue&&null!=compare_category&&""!=productValue&&""!=compare_category){var newObject={id:productValue,category:compare_category},compare_products;if(null!=newDataCompare&&""!=newDataCompare)if(product_count=(compare_products=JSON.parse(newDataCompare)).length,compare_products.length>0)for(var i=0;i<compare_products.length;i++)if(compare_products[i]){if(null!=compare_products[i].id&&""!=compare_products[i].id){if($("body").hasClass("catalog-product-view")){var productCode=$("#compare_this").attr("data-product");null!=productCode&&""!=productCode&&compare_products[i].id==productCode&&(newalreadyExists=!0)}overall_products+=0==i?compare_products[i].id:","+compare_products[i].id}null!=compare_products[i].category&&""!=compare_products[i].category&&(overall_category[i]=compare_products[i].category)}}if(CompareExists(),""!=overall_products)if(overall_category)if(1==(overall_category=uniqueValue(overall_category)).length&&overall_category[0]){isModalClose(".compare_pdp_list","jm-bottomsheet-visible",!1),isModalClose(".compare_products_list","jm-bottomsheet-visible",!1),product_count>0&&$("body").hasClass("catalog-category-view")&&CompareExists(),"undefined"!=typeof notify&&notify("Added to Compare","success");var dataURL=window.location.origin+"/compare/"+overall_category[0]+"/?ids="+overall_products;$("#compare_popup").load(dataURL,(function(e){isModalOpen("#compare_products_popup","jm-page-bottomsheet-visible")}))}}}));